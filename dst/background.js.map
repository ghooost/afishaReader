{"version":3,"sources":["webpack:///webpack/bootstrap faf8fdee4f544bfe3b67","webpack:///./src/background.js","webpack:///./src/urls.json","webpack:///./php/data.json","webpack:///./src/classes/AfishaBackground.js","webpack:///./src/classes/ExtBackground.js","webpack:///./src/classes/Background.js","webpack:///./src/classes/constants.js"],"names":["bg","verbose","browserAction","receivePluginMessages","urls","locData","AfishaBackground","options","state","mode","baseUrl","startUrl","tab","onBrowserActionGen","onBrowserActionPost","onBrowserActionReal","buf","forEach","item","url","push","console","log","join","query","Promise","resolve","then","fd","FormData","append","calendar","extFetch","method","body","name","pause","inProgress","grabSource","musicals","queue","list","dom","querySelectorAll","cnt","m","parsePage","attributes","value","length","dataToSend","o","JSON","stringify","catch","err","parseMusical","musical","querySelector","innerHTML","shows","d","u","p","date","Date","parse","price","compileCalendar","rules","ms","getTime","itemRules","filter","checkAfishaRule","rule","endDate","Object","assign","startDate","time","formTime","rules2","dates","formDate","map","date1","date2","checkDate","setDate","getDate","getMinutes","ret","getHours","getMonth","getFullYear","ExtBackground","stage","STARTING","output","errorMes","fetch","response","ok","toLowerCase","text","parser","DOMParser","parseFromString","Error","delay","message","reject","setTimeout","request","sender","sendResponse","action","doAction","data","reDraw","Background","defOptions","receiveNotesClick","browser","onClicked","addListener","onBrowserAction","bind","runtime","onMessage","onPluginMessage","notifications","onNoteClick","noteId","WAIT"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC7DA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,KAAG,+BAAqB;AAC5BC,WAAQ,KADoB;AAE5BC,iBAAc,IAFc;AAG5BC,yBAAsB,KAHM;AAI5BC,sBAJ4B;AAK5BC;AAL4B,CAArB,CAAT,C;;;;;;ACJA,kBAAkB,85M;;;;;;ACAlB,mBAAmB,4vBAA4vB,EAAE,yeAAye,EAAE,qMAAqM,EAAE,wLAAwL,EAAE,qNAAqN,EAAE,gdAAgd,EAAE,iRAAiR,EAAE,wMAAwM,EAAE,ySAAyS,EAAE,8MAA8M,EAAE,iXAAiX,EAAE,yeAAye,EAAE,+KAA+K,EAAE,gWAAgW,EAAE,6JAA6J,EAAE,iNAAiN,EAAE,2MAA2M,EAAE,0XAA0X,EAAE,sNAAsN,EAAE,iNAAiN,EAAE,4IAA4I,EAAE,qLAAqL,EAAE,yLAAyL,EAAE,+RAA+R,EAAE,iSAAiS,EAAE,qTAAqT,EAAE,wWAAwW,EAAE,uMAAuM,EAAE,yJAAyJ,EAAE,wLAAwL,EAAE,gMAAgM,EAAE,yMAAyM,EAAE,uRAAuR,EAAE,qJAAqJ,EAAE,gLAAgL,EAAE,gJAAgJ,EAAE,yNAAyN,EAAE,2MAA2M,EAAE,2JAA2J,EAAE,8OAA8O,EAAE,4LAA4L,EAAE,6MAA6M,EAAE,qKAAqK,EAAE,qOAAqO,EAAE,6RAA6R,EAAE,mNAAmN,EAAE,uLAAuL,EAAE,8HAA8H,EAAE,2KAA2K,EAAE,sMAAsM,EAAE,4MAA4M,EAAE,6OAA6O,EAAE,iLAAiL,EAAE,4IAA4I,EAAE,6NAA6N,EAAE,2MAA2M,EAAE,mWAAmW,EAAE,iPAAiP,EAAE,+PAA+P,EAAE,yJAAyJ,EAAE,2LAA2L,EAAE,4SAA4S,EAAE,yOAAyO,EAAE,oLAAoL,EAAE,oOAAoO,EAAE,8PAA8P,EAAE,kOAAkO,EAAE,6KAA6K,EAAE,iNAAiN,EAAE,+KAA+K,EAAE,mLAAmL,EAAE,mKAAmK,EAAE,6KAA6K,EAAE,oJAAoJ,C;;;;;;;;;;;;;;;;;ACA/giB;;;;;;;;;;;;IAEqBC,gB;;;AACnB,8BAAuB;AAAA,QAAXC,OAAW,uEAAH,EAAG;;AAAA;;AAAA,oIACfA,OADe;;AAErB,UAAKC,KAAL,CAAWC,IAAX,GAAgB,MAAhB;AACA,UAAKD,KAAL,CAAWE,OAAX,GAAmB,2BAAnB;AACA,UAAKF,KAAL,CAAWG,QAAX,GAAoB,MAAKH,KAAL,CAAWE,OAAX,GAAmB,WAAvC;AAJqB;AAKtB;;;;oCACeE,G,EAAI;AAClB,cAAO,KAAKJ,KAAL,CAAWC,IAAlB;AACE,aAAK,KAAL;AACE,eAAKI,kBAAL,CAAwBD,GAAxB;AACF;AACA,aAAK,MAAL;AACE,eAAKE,mBAAL,CAAyBF,GAAzB;AACF;AACA,aAAK,MAAL;AACE,eAAKG,mBAAL,CAAyBH,GAAzB;AACF;AATF;AAWD;;;uCACkBA,G,EAAI;AAAA;;AACrB,UAAII,MAAI,EAAR;AACA,WAAKR,KAAL,CAAWD,OAAX,CAAmBF,OAAnB,CAA2BY,OAA3B,CAAmC,gBAAM;AACvC,YAAG,OAAKT,KAAL,CAAWD,OAAX,CAAmBH,IAAnB,CAAwBc,KAAKC,GAA7B,CAAH,EAAqC;AACnCH,cAAII,IAAJ,OAAaF,KAAKC,GAAlB,UAA0B,OAAKX,KAAL,CAAWD,OAAX,CAAmBH,IAAnB,CAAwBc,KAAKC,GAA7B,CAA1B;AACD,SAFD,MAEO;AACLH,cAAII,IAAJ,OAAaF,KAAKC,GAAlB;AACD;AACF,OAND;AAOAE,cAAQC,GAAR,CAAYN,IAAIO,IAAJ,CAAS,KAAT,CAAZ;AACD;;;wCACmBX,G,EAAI;AAAA;;AACtB,UAAIY,QAAMC,QAAQC,OAAR,EAAV;AACA,WAAKlB,KAAL,CAAWD,OAAX,CAAmBF,OAAnB,CAA2BY,OAA3B,CAAmC,gBAAM;AACvCO,gBAAMA,MACLG,IADK,CACA,YAAI;AACR,cAAG,OAAKnB,KAAL,CAAWD,OAAX,CAAmBH,IAAnB,CAAwBc,KAAKC,GAA7B,CAAH,EAAqC;AACnC,gBAAIS,KAAG,IAAIC,QAAJ,EAAP;AACAD,eAAGE,MAAH,CAAU,KAAV,EAAgB,OAAKtB,KAAL,CAAWD,OAAX,CAAmBH,IAAnB,CAAwBc,KAAKC,GAA7B,CAAhB;AACAS,eAAGE,MAAH,CAAU,QAAV,EAAmBZ,KAAKa,QAAxB;AACA,mBAAO,OAAKC,QAAL,CAAc,+BAAd,EAA8C,EAACC,QAAO,MAAR,EAAeC,MAAKN,EAApB,EAA9C,EAAsE,MAAtE,EAA6E,oBAA7E,EACND,IADM,CACD,gBAAM;AACVN,sBAAQC,GAAR,CAAY,UAAZ,EAAuBJ,KAAKiB,IAA5B;AACD,aAHM,EAINR,IAJM,CAID;AAAA,qBAAI,OAAKS,KAAL,CAAW,IAAX,CAAJ;AAAA,aAJC,CAAP;AAKD,WATD,MASO;AACLf,oBAAQC,GAAR,CAAY,aAAZ,EAA0BJ,KAAKiB,IAA/B;AACAd,oBAAQC,GAAR,CAAYJ,KAAKC,GAAjB;AACD;AACF,SAfK,CAAN;AAgBD,OAjBD;AAkBD;;;wCACmBP,G,EAAI;AAC1B;AACI,UAAG,CAAC,KAAKyB,UAAT,EAAoB;AAClBC;AACD,OAFD,MAEO;AACLjB,gBAAQC,GAAR,CAAY,iBAAZ;AACD;AACF;;;iCAEW;AAAA;;AACV,WAAKd,KAAL,CAAW+B,QAAX,GAAoB,EAApB;AACA,WAAKF,UAAL,GAAgB,IAAhB;AACA,WAAKL,QAAL,CAAc,KAAKxB,KAAL,CAAWG,QAAzB,EAAkC,EAAlC,EAAqC,KAArC,EACCgB,IADD,CACM,eAAK;AACf;AACQ,YAAIa,QAAMf,QAAQC,OAAR,EAAV;AACA,YAAIe,OAAKC,IAAIC,gBAAJ,CAAqB,yBAArB,CAAT;;AAHO,mCAICC,GAJD,EAIOC,CAJP;AAKL,cAAGD,OAAK,CAAR,EAAU;AACRJ,oBAAMA,MACLb,IADK,CACA;AAAA,qBAAI,OAAKmB,SAAL,CAAe,EAAf,EAAkBJ,GAAlB,CAAJ;AAAA,aADA,CAAN;AAED,WAHD,MAGO;AACL;AACAF,oBAAMA,MACLb,IADK,CACA;AAAA,qBAAI,OAAKS,KAAL,CAAW,IAAX,CAAJ;AAAA,aADA,EAELT,IAFK,CAEA;AAAA,qBAAI,OAAKmB,SAAL,CAAe,OAAKtC,KAAL,CAAWE,OAAX,GAAmB+B,KAAKG,GAAL,EAAUG,UAAV,CAAqB,MAArB,EAA6BC,KAA/D,EAAqE,IAArE,CAAJ;AAAA,aAFA,CAAN;AAGD;AAbI;;AAIP,aAAI,IAAIJ,MAAI,CAAR,EAAUC,IAAEJ,KAAKQ,MAArB,EAA4BL,MAAIC,CAAhC,EAAkCD,KAAlC,EAAwC;AAAA,gBAAhCA,GAAgC,EAA1BC,CAA0B;AAUvC;AACDL,gBAAMA,MAAMb,IAAN,CAAW,YAAI;AACnB,cAAG,OAAKnB,KAAL,CAAWD,OAAX,CAAmBN,OAAtB,EAA8B;AAC5BoB,oBAAQC,GAAR,CAAY,OAAZ;AACD;AACD;AACA,cAAIM,KAAG,IAAIC,QAAJ,EAAP;AACA,cAAIqB,aAAW,EAAf;AACA,eAAI,IAAIC,CAAR,IAAa,OAAK3C,KAAL,CAAW+B,QAAxB,EAAiC;AAC/B,gBAAIrB,OAAK,OAAKV,KAAL,CAAW+B,QAAX,CAAoBY,CAApB,CAAT;AACAD,uBAAW9B,IAAX,CAAgB;AACdD,mBAAID,KAAKC,GADK;AAEdgB,oBAAKjB,KAAKiB,IAFI;AAGdJ,wBAASb,KAAKa;AAHA,aAAhB;AAKD;AACDH,aAAGE,MAAH,CAAU,MAAV,EAAiBsB,KAAKC,SAAL,CAAeH,UAAf,CAAjB;AACA,iBAAOlB,SAAS,6CAAT,EAAuD;AAC5DC,oBAAO,MADqD;AAE5DC,kBAAKN;AAFuD,WAAvD,CAAP;AAIA,iBAAKS,UAAL,GAAgB,KAAhB;AACD,SArBK,CAAN;AAsBA,eAAOG,KAAP;AACH,OAvCD,EAwCCc,KAxCD,CAwCO,eAAK;AACVjC,gBAAQC,GAAR,CAAYiC,GAAZ;AACD,OA1CD;AA2CD;;;8BAESpC,G,EAAIuB,G,EAAI;AAAA;;AAChB,UAAG,CAACA,GAAJ,EAAQ;AACN,YAAG,KAAKlC,KAAL,CAAWD,OAAX,CAAmBN,OAAtB,EAA8B;AAC5BoB,kBAAQC,GAAR,CAAY,uBAAZ,EAAoCH,GAApC;AACD;AACD,eAAO,KAAKa,QAAL,CAAcb,GAAd,EAAkB,EAAlB,EAAqB,KAArB,EACNQ,IADM,CACD;AAAA,iBAAK,OAAKmB,SAAL,CAAe3B,GAAf,EAAmBuB,GAAnB,CAAL;AAAA,SADC,CAAP;AAED,OAND,MAMO;AAAA;AACL,cAAG,OAAKlC,KAAL,CAAWD,OAAX,CAAmBN,OAAtB,EAA8B;AAC5BoB,oBAAQC,GAAR,CAAY,iCAAZ;AACD;AACD,cAAImB,OAAKC,IAAIC,gBAAJ,CAAqB,qDAArB,CAAT;AACA,cAAIH,QAAMf,QAAQC,OAAR,EAAV;;AALK,uCAMGkB,GANH,EAMSC,CANT;AAOH,gBAAGD,OAAK,CAAR,EAAU;AACRJ,sBAAMA,MAAMb,IAAN,CAAW;AAAA,uBAAI,OAAKS,KAAL,CAAW,IAAX,CAAJ;AAAA,eAAX,CAAN;AACD;AACDI,oBAAMA,MAAMb,IAAN,CAAW;AAAA,qBAAI,OAAK6B,YAAL,CAAkB,OAAKhD,KAAL,CAAWE,OAAX,GAAmB+B,KAAKG,GAAL,EAAUG,UAAV,CAAqB,MAArB,EAA6BC,KAAlE,CAAJ;AAAA,aAAX,CAAN;AAVG;;AAML,eAAI,IAAIJ,MAAI,CAAR,EAAUC,IAAEJ,KAAKQ,MAArB,EAA4BL,MAAIC,CAAhC,EAAkCD,KAAlC,EAAwC;AAAA,mBAAhCA,GAAgC,EAA1BC,CAA0B;AAKvC;AACD;AAAA,eAAOL;AAAP;AAZK;;AAAA;AAaN;AACF;;;iCACYrB,G,EAAI;AAAA;;AACf,UAAG,KAAKX,KAAL,CAAWD,OAAX,CAAmBN,OAAtB,EAA8B;AAC5BoB,gBAAQC,GAAR,CAAY,qBAAZ,EAAkCH,GAAlC;AACD;AACD,UAAIsC,UAAQ;AACVtC,aAAIA;AADM,OAAZ;AAGA,aAAO,KAAKa,QAAL,CAAcb,GAAd,EAAkB,EAAlB,EAAqB,KAArB,EACNQ,IADM,CACD,eAAK;AACT8B,gBAAQtB,IAAR,GAAaO,IAAIgB,aAAJ,CAAkB,kBAAlB,EAAsCC,SAAnD;AACAF,gBAAQG,KAAR,GAAc,EAAd;AACA,YAAIA,QAAMlB,IAAIC,gBAAJ,CAAqB,iCAArB,CAAV;AACA,aAAI,IAAIC,MAAI,CAAR,EAAUC,IAAEe,MAAMX,MAAtB,EAA6BL,MAAIC,CAAjC,EAAmCD,KAAnC,EAAyC;AACvC,cAAIiB,IAAED,MAAMhB,GAAN,EAAWc,aAAX,CAAyB,yCAAzB,CAAN;AACA,cAAII,IAAEF,MAAMhB,GAAN,EAAWc,aAAX,CAAyB,4BAAzB,CAAN;AACA,cAAIK,IAAEH,MAAMhB,GAAN,EAAWc,aAAX,CAAyB,yBAAzB,CAAN;AACAD,kBAAQG,KAAR,CAAcxC,IAAd,CAAmB;AACjB4C,kBAAKH,IAAE,IAAII,IAAJ,CAASA,KAAKC,KAAL,CAAWL,EAAEd,UAAF,CAAa,SAAb,EAAwBC,KAAnC,CAAT,CAAF,GAAsD,EAD1C;AAEjB7B,iBAAI2C,IAAE,OAAKtD,KAAL,CAAWE,OAAX,GAAmBoD,EAAEf,UAAF,CAAa,MAAb,EAAqBC,KAA1C,GAAgD,EAFnC;AAGjBmB,mBAAMJ,IAAEA,EAAEJ,SAAJ,GAAc;AAHH,WAAnB;AAKD;AACDF,gBAAQ1B,QAAR,GAAiB,OAAKqC,eAAL,CAAqBX,QAAQG,KAA7B,CAAjB;AACA,YAAG,OAAKpD,KAAL,CAAWD,OAAX,CAAmBN,OAAtB,EAA8B;AAC5BoB,kBAAQC,GAAR,CAAYmC,OAAZ;AACD;AACD,eAAKjD,KAAL,CAAW+B,QAAX,CAAoBpB,GAApB,IAAyBsC,OAAzB;AACD,OApBM,CAAP;AAqBD;AACH;;;;oCACkBG,K,EAAM;AAAA;;AACpB,UAAIS,QAAM,EAAV;AACAT,YAAM3C,OAAN,CAAc,gBAAM;AAClB,YAAIqD,KAAGpD,KAAK8C,IAAL,CAAUO,OAAV,EAAP;AACA,YAAIC,YAAUH,MAAMI,MAAN,CAAa,gBAAM;AAC7B,iBAAO,OAAKC,eAAL,CAAqBC,KAAKC,OAAL,CAAaL,OAAb,EAArB,EAA4CD,EAA5C,CAAP;AACH,SAFa,CAAd;AAGA,YAAGE,UAAUvB,MAAb,EAAoB;AAClBuB,oBAAU,CAAV,EAAaI,OAAb,GAAqB1D,KAAK8C,IAA1B;AACD,SAFD,MAEO;AACLK,gBAAMjD,IAAN,CAAWyD,OAAOC,MAAP,CAAc,EAACC,WAAU7D,KAAK8C,IAAhB,EAAqBY,SAAQ1D,KAAK8C,IAAlC,EAAuCgB,MAAK,OAAKC,QAAL,CAAc/D,KAAK8C,IAAnB,CAA5C,EAAd,EAAoF9C,IAApF,CAAX;AACD;AACF,OAVD;;AAYA,UAAIgE,SAAO,EAAX;AACAb,YAAMpD,OAAN,CAAc,gBAAM;AAClB,YAAIkE,QAAOR,KAAKI,SAAL,CAAeR,OAAf,MAA0BI,KAAKC,OAAL,CAAaL,OAAb,EAA3B,GACR,OAAKa,QAAL,CAAcT,KAAKI,SAAnB,IAA8B,GAA9B,GAAkC,OAAKK,QAAL,CAAcT,KAAKC,OAAnB,CAD1B,GAER,OAAKQ,QAAL,CAAcT,KAAKI,SAAnB,CAFF;;AAIA,YAAGG,OAAOC,KAAP,CAAH,EAAiB;AACfD,iBAAOC,KAAP,EAAcH,IAAd,IAAoB,MAAIL,KAAKK,IAA7B;AACD,SAFD,MAEO;AACLE,iBAAOC,KAAP,IAAcN,OAAOC,MAAP,CAAc,EAAd,EAAiBH,IAAjB,EAAsB,EAACQ,OAAMA,KAAP,EAAtB,CAAd;AACD;AACF,OAVD;AAWAd,cAAM,EAAN;AACA,WAAI,IAAIlB,CAAR,IAAa+B,MAAb,EAAoB;AAClBb,cAAMjD,IAAN,CAAW8D,OAAO/B,CAAP,CAAX;AACD;;AAED,aAAOkB,MAAMgB,GAAN,CAAU,gBAAM;AACrB,qBAAWV,KAAKQ,KAAhB,WAA2BR,KAAKK,IAAhC;AACD,OAFM,EAEJzD,IAFI,CAEC,GAFD,CAAP;AAGD;;;oCAEe+D,K,EAAMC,K,EAAM;AAC1B,UAAIC,YAAU,IAAIvB,IAAJ,CAASqB,KAAT,CAAd;AACAE,gBAAUC,OAAV,CAAkBD,UAAUE,OAAV,KAAoB,CAAtC;AACA,aAAOF,UAAUjB,OAAV,MAAqBgB,KAA5B;AACD;;;6BAEQvB,I,EAAK;AACZ,UAAInB,IAAEmB,KAAK2B,UAAL,EAAN;AACA,UAAIC,MAAI5B,KAAK6B,QAAL,KAAgB,GAAxB;AACA,UAAGhD,IAAE,EAAL,EAAQ;AACN+C,eAAK,GAAL;AACD;AACDA,aAAK/C,CAAL;AACA,aAAO+C,GAAP;AACD;;;6BAEQ5B,I,EAAK;AACZ,aAAOA,KAAK0B,OAAL,KAAe,GAAf,IAAoB1B,KAAK8B,QAAL,KAAgB,CAApC,IAAuC,GAAvC,GAA2C9B,KAAK+B,WAAL,EAAlD;AACD;;;;;;kBAvNkBzF,gB;;;;;;;;;;;;;;;ACFrB;;;;AACA;;;;;;;;;;;;IAEqB0F,a;;;AACnB,2BAAuB;AAAA,QAAXzF,OAAW,uEAAH,EAAG;;AAAA;;AAAA,8HACfA,OADe;;AAErB,UAAKC,KAAL,CAAWyF,KAAX,GAAiB,oBAAMC,QAAvB;AAFqB;AAGtB;;;;6BACQ/E,G,EAAyD;AAAA,UAArDZ,OAAqD,uEAA7C,EAA6C;AAAA,UAA1C4F,MAA0C;AAAA,UAAnCC,QAAmC,uEAA1B,yBAA0B;;AAChE,UAAG,KAAK5F,KAAL,CAAWD,OAAX,CAAmBN,OAAtB,EAA8B;AAC5BoB,gBAAQC,GAAR,CAAY,YAAZ,EAAyBH,GAAzB;AACD;AACD,aAAOkF,MAAMlF,GAAN,EAAUZ,OAAV,EACNoB,IADM,CACD,oBAAU;AACd,YAAG2E,SAASC,EAAZ,EAAe;AACb,kBAAOJ,OAAOK,WAAP,EAAP;AACE,iBAAK,KAAL;AACE,qBAAOF,SAASG,IAAT,GACN9E,IADM,CACD,gBAAM;AACV,oBAAI+E,SAAO,IAAIC,SAAJ,EAAX;AACA,uBAAOD,OAAOE,eAAP,CAAuBH,IAAvB,EAA4B,WAA5B,CAAP;AACD,eAJM,CAAP;AAKF;AACA;AACE,qBAAOH,SAASH,MAAT,GAAP;AATJ;AAWD,SAZD,MAYO;AACL,gBAAM,IAAIU,KAAJ,CAAUT,QAAV,CAAN;AACD;AACF,OAjBM,EAkBN9C,KAlBM,CAkBA,eAAK;AACVjC,gBAAQC,GAAR,CAAY,kBAAZ,EAA+BiC,GAA/B;AACA,cAAMA,GAAN;AACD,OArBM,CAAP;AAsBD;;;0BACKuD,K,EAAuC;AAAA,UAAjClB,GAAiC,uEAA7B,EAA6B;AAAA,UAA1BmB,OAA0B,mFAARD,KAAQ;;AAC3C,UAAG,KAAKtG,KAAL,CAAWD,OAAX,CAAmBN,OAAtB,EAA8B;AAC5BoB,gBAAQC,GAAR,CAAYyF,OAAZ;AACD;AACD,aAAO,IAAItF,OAAJ,CAAY,UAACC,OAAD,EAASsF,MAAT,EAAkB;AACnCC,mBAAW,YAAI;AACXvF,kBAAQkE,GAAR;AACH,SAFD,EAEEkB,KAFF;AAGD,OAJM,CAAP;AAKD;;;oCACeI,O,EAAQC,M,EAAOC,Y,EAAa;AAC1C,UAAGF,QAAQG,MAAX,EAAkB;AAChBC,iBAASJ,QAAQG,MAAjB,EAAwBH,QAAQK,IAAhC,EAAqCJ,MAArC;AACD;AACF;;;6BACQE,M,EAAwB;AAAA;;AAAA,UAAjBE,IAAiB,uEAAZ,EAAY;AAAA,UAATT,KAAS,uEAAH,EAAG;;AAC/B,aAAO,KAAK1E,KAAL,CAAW0E,KAAX,EAAkBnF,IAAlB,CAAuB;AAAA,eAAI,OAAK2F,QAAL,CAAcD,MAAd,EAAqBE,IAArB,CAAJ;AAAA,OAAvB,CAAP;AACD;;;6BACQF,M,EAA2B;AAAA,UAApBE,IAAoB,uEAAf,EAAe;AAAA,UAAZJ,MAAY,uEAAL,IAAK;;AAClC;AACA,cAAOE,MAAP;AACE;AACE,eAAKG,MAAL;AAFJ;AAID;;;6BACO;AACN;AACD;;;;;;kBA3DkBxB,a;;;;;;;;;;;;;;;;;ICHAyB,U;AACnB,wBAAuB;AAAA;;AAAA,QAAXlH,OAAW,uEAAH,EAAG;;AAAA;;AACrB,QAAMmH,aAAW;AACbvH,6BAAsB,IADT;AAEbD,qBAAc,KAFD;AAGbD,eAAQ,KAHK;AAIb0H,yBAAkB;AAJL,KAAjB;AAMA,SAAKnH,KAAL,GAAWqE,OAAOC,MAAP,CAAc,EAAd,EAAiB,EAACvE,SAAQsE,OAAOC,MAAP,CAAc,EAAd,EAAiB4C,UAAjB,EAA4BnH,OAA5B,CAAT,EAAjB,CAAX;AACA,QAAG,KAAKC,KAAL,CAAWD,OAAX,CAAmBN,OAAtB,EAA8B;AAC5BoB,cAAQC,GAAR,CAAY,oBAAZ;AACD;AACD,QAAG,KAAKd,KAAL,CAAWD,OAAX,CAAmBL,aAAtB,EAAoC;AAClC0H,cAAQ1H,aAAR,CAAsB2H,SAAtB,CAAgCC,WAAhC,CAA4C,UAAClH,GAAD;AAAA,eAAO,MAAKmH,eAAL,CAAqBC,IAArB,QAA+BpH,GAA/B,EAAoCA,GAApC,CAAP;AAAA,OAA5C;AACD;AACD,QAAG,KAAKJ,KAAL,CAAWD,OAAX,CAAmBJ,qBAAtB,EAA4C;AAC1CyH,cAAQK,OAAR,CAAgBC,SAAhB,CAA0BJ,WAA1B,CAAsC,UAACZ,OAAD,EAAUC,MAAV,EAAkBC,YAAlB;AAAA,eAAmC,MAAKe,eAAL,CAAqBH,IAArB,QAA+Bd,OAA/B,EAAuCC,MAAvC,EAA8CC,YAA9C,EAA4DF,OAA5D,EAAqEC,MAArE,EAA6EC,YAA7E,CAAnC;AAAA,OAAtC;AACD;AACD,QAAG,KAAK5G,KAAL,CAAWD,OAAX,CAAmBoH,iBAAtB,EAAwC;AACtCC,cAAQQ,aAAR,CAAsBP,SAAtB,CAAgCC,WAAhC,CAA4C;AAAA,eAAU,MAAKO,WAAL,CAAiBL,IAAjB,QAA2BM,MAA3B,EAAmCA,MAAnC,CAAV;AAAA,OAA5C;AACD;AACF;;;;oCACe1H,G,EAAI;AAClB;AACD;;;oCACesG,O,EAAQC,M,EAAOC,Y,EAAa;AAC1C;AACD;;;gCACWkB,M,EAAO;AACjB;AACD;;;;;;kBA9BkBb,U;;;;;;;;;;;;kBCAN;AACbvB,YAAS,UADI;AAEbqC,QAAK;AAFQ,C","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap faf8fdee4f544bfe3b67","import urls from './urls.json';\nimport locData from '../php/data.json';\nimport AfishaBackground from './classes/AfishaBackground';\n\nconst bg=new AfishaBackground({\n  verbose:false,\n  browserAction:true,\n  receivePluginMessages:false,\n  urls:urls,\n  locData:locData\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/background.js","module.exports = {\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/\":218,\"https://www.ticketland.ru/teatry/teatr-operetty/anna-karenina/\":188,\"https://www.ticketland.ru/teatry/teatr-satiry/dorogi-kotorye-nas-vybirayut/\":40,\"https://www.ticketland.ru/teatry/teatr-operetty/maugli/\":12,\"https://www.ticketland.ru/teatry/teatr-russkaya-pesnya-malaya-scena/noch-pered-rozhdestvom/\":195,\"https://www.ticketland.ru/doma-kultury/kongress-centr-imeni-gv-plekhanova/schenyachiy-patrul-smelo-za-delo/\":\"\",\"https://www.ticketland.ru/cirki/cirk-chudes/skolko-stoit-lubov/\":80,\"https://www.ticketland.ru/teatry/teatr-operetty/zolushka/\":41,\"https://www.ticketland.ru/doma-kultury/dkit-mai/novogodnie-gonki-2/\":\"\",\"https://www.ticketland.ru/teatry/teatrium-na-serpukhovke-p-r-terezy-durovoy/duenya/\":163,\"https://www.ticketland.ru/teatry/teatr-rossiyskoy-armii/3d-shou-pola-negri-pola-negri/\":137,\"https://www.ticketland.ru/teatry/teatr-myuzikla/princessa-cirka/\":186,\"https://www.ticketland.ru/teatry/teatr-operetty/fanfan-tyulpan/\":24,\"https://www.ticketland.ru/teatry/teatr-myuzikla/prestuplenie-i-nakazanie/\":184,\"https://www.ticketland.ru/teatry/teatr-operetty/moya-prekrasnaya-ledi/\":42,\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/volshebnik-izumrudnogo-goroda/\":19,\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/gribnoy-perepolokh/\":132,\"https://www.ticketland.ru/doma-kultury/kulturnyy-centr-moskvich/cirkovoy-myuzikl-alisa/\":\"\",\"https://www.ticketland.ru/teatry/teatrium-na-serpukhovke-p-r-terezy-durovoy/letychii-korabl/\":56,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/rok-opera-yunona-i-avos-teatr-alekseya-rybnikova/\":62,\"https://www.ticketland.ru/teatry/teatr-operetty/myuzikl-dzheyn-eyr/\":136,\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/volshebnaya-lampa-aladdina/\":196,\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/ostrov-sokrovisch/\":32,\"https://www.ticketland.ru/teatry/moskovskiy-oblastnoy-teatr-yunogo-zritelya-mogtyuz/ledi-sovershenstvo-s-grishaevoy/\":185,\"https://www.ticketland.ru/teatry/muzykalnyy-teatr-ayvengo-v-izmaylovo/ballada-o-malenkom-serdce/\":182,\"https://www.ticketland.ru/teatry/moskovskiy-oblastnoy-teatr-yunogo-zritelya-mogtyuz/ledi-sovershenstvo-s-bystrovoy/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/kino-kholl-vgik/poymay-menya-esli-smozhesh/\":187,\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/iisus-khristos-superzvezda/\":53,\"https://www.ticketland.ru/teatry/teatr-operetty/cezar-i-kleopatra/\":43,\"https://www.ticketland.ru/koncertnye-zaly/myuzik-kholl/shkola-lesnoi-magii/\":152,\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/spectakl-volshebnik-izumrudnogo-goroda/\":19,\"https://www.ticketland.ru/teatry/teatr-im-vl-mayakovskogo/mama-kot/\":126,\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/peppi-dlinnyychulok/\":178,\"https://www.ticketland.ru/doma-kultury/dk-zareche/chelovek-amfibiya/\":29,\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/oliver-tvist/\":151,\"https://www.ticketland.ru/teatry/teatr-estrady/shkodnyy-myuzikl/\":206,\"https://www.ticketland.ru/teatry/detskiy-teatr-estrady/master-i-margarita-myuzikl/\":59,\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/sadko-i-carevna-morskaya/\":176,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/kapitanskaya-dochka/\":210,\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/priklucheniya-olivera-tvista/\":17,\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/snezhnaya-koroleva/\":69,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/rok-opera-yunona-i-avos-teatr-alekseya-rybnikov/\":62,\"https://www.ticketland.ru/doma-kultury/dvorec-kultury-rublevo/kak-zhit-zamuzhem/\":100,\"https://www.ticketland.ru/teatry/teatr-luny/meri-poppins-next/\":22,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/novogodniy-myuzikl-volk-i-semero-kozlyat-na-novyy-lad/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/myuzik-kholl/priklyucheniya-toma-soyera/\":181,\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/bremenskie-muzykanty/\":115,\"https://www.ticketland.ru/teatry/teatr-romen/zolushka/\":\"\",\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/gambrinus/\":102,\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/nedorosl/\":169,\"https://www.ticketland.ru/teatry/teatr-romen/pirat-i-prizraki/\":121,\"https://www.ticketland.ru/teatry/centr-dramaturgii-i-rezhissury/bratec-krolik-bratec-lis/\":166,\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/kak-possorilsya-ii-s-in/\":35,\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/lukomore/\":92,\"https://www.ticketland.ru/teatry/detskiy-muzykalno-dramatichskiy-teatr-a-ya/kak-obezyana-morskogo-carya-perekhitrila/\":197,\"https://www.ticketland.ru/doma-kultury/dk-im-zueva/bremenskie-muzykanty-vozvraschenie-legendy/\":155,\"https://www.ticketland.ru/teatry/novyy-dramaticheskiy-teatr/morozko/\":\"\",\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/moskovskaya-istoriya-1205/\":87,\"https://www.ticketland.ru/koncertnye-zaly/kino-kholl-vgik/schelkunchik-i-myshinyy-korol/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/sindbad-morekhod/\":\"\",\"https://www.ticketland.ru/teatry/filial-teatra-pushkina/rozhdestvo-ogenri/\":157,\"https://www.ticketland.ru/teatry/teatr-myuzikla/chudesa-i-kuralesy/\":223,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-snezhnaya-koroleva-kamernyy-muzykalnyy-teatr-el-art/\":201,\"https://www.ticketland.ru/doma-kultury/kulturnyy-centr-zil/3d-mapping-shou-chernomor/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/todd-5-let-den-rozhdeniya-rok-myuzikla/\":\"\",\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-ekspromt/ali-baba-i-40-razboynikov/\":164,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-novogodnie-priklyucheniya-malenkikh-volshebnikov/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/3d-myuzikl-alisa-v-strane-chudes/\":191,\"https://www.ticketland.ru/sportivnye-kompleksy/ok-luzhniki/ledovyy-myuzikl-drakula-istoriya-vechnoy-lyubvi/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/iisus-khristos-superzvezda/\":117,\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/moy-samyy-luchshiy-papa/\":217,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-kapitanskaya-dochka/\":210,\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/bednaya-liza/\":104,\"https://www.ticketland.ru/teatry/teatr-zolotoe-kolco/yunona-i-avos/\":\"\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/urls.json\n// module id = 1\n// module chunks = 0","module.exports = [{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/\",\"name\":\"Мюзикл «Привидение»\",\"calendar\":\"\\\"5.11.2017-6.11.2017\\\":\\\"13:00,18:00\\\",\\\"8.11.2017\\\":\\\"19:00\\\",\\\"11.11.2017-12.11.2017\\\":\\\"13:00,18:00\\\",\\\"14.11.2017-17.11.2017\\\":\\\"19:00\\\",\\\"18.11.2017-19.11.2017\\\":\\\"13:00,18:00\\\",\\\"21.11.2017-23.11.2017\\\":\\\"19:00\\\",\\\"25.11.2017-26.11.2017\\\":\\\"13:00,18:00\\\",\\\"29.11.2017-30.11.2017\\\":\\\"19:00\\\",\\\"2.12.2017-3.12.2017\\\":\\\"13:00,18:00\\\",\\\"5.12.2017-6.12.2017\\\":\\\"19:00\\\",\\\"8.12.2017-11.12.2017\\\":\\\"19:00\\\",\\\"9.12.2017-10.12.2017\\\":\\\"14:00\\\",\\\"13.12.2017-14.12.2017\\\":\\\"19:00\\\",\\\"17.12.2017\\\":\\\"13:00,18:00\\\",\\\"19.12.2017\\\":\\\"19:00\\\",\\\"23.12.2017\\\":\\\"14:00,19:00\\\",\\\"29.12.2017\\\":\\\"19:00\\\",\\\"30.12.2017-31.12.2017\\\":\\\"13:00,18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/anna-karenina/\",\"name\":\"Мюзикл «Анна Каренина»\",\"calendar\":\"\\\"8.11.2017-19.11.2017\\\":\\\"19:00\\\",\\\"11.11.2017-12.11.2017\\\":\\\"14:00\\\",\\\"18.11.2017-19.11.2017\\\":\\\"14:00\\\",\\\"15.12.2017-17.12.2017\\\":\\\"19:00\\\",\\\"16.12.2017-17.12.2017\\\":\\\"14:00\\\",\\\"19.12.2017-20.12.2017\\\":\\\"19:00\\\",\\\"22.12.2017-24.12.2017\\\":\\\"19:00\\\",\\\"23.12.2017-24.12.2017\\\":\\\"14:00\\\",\\\"26.12.2017-30.12.2017\\\":\\\"19:00\\\",\\\"30.12.2017\\\":\\\"14:00\\\",\\\"31.12.2017\\\":\\\"18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-satiry/dorogi-kotorye-nas-vybirayut/\",\"name\":\"Спектакль «Дороги, которые нас выбирают»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"19:00\\\",\\\"22.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/maugli/\",\"name\":\"Детский спектакль «Маугли»\",\"calendar\":\"\\\"5.11.2017\\\":\\\"12:00\\\",\\\"3.12.2017\\\":\\\"12:00\\\",\\\"4.1.2018\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-russkaya-pesnya-malaya-scena/noch-pered-rozhdestvom/\",\"name\":\"Мюзикл «Ночь перед Рождеством»\",\"calendar\":\"\\\"7.11.2017\\\":\\\"19:00\\\",\\\"27.12.2017-30.12.2017\\\":\\\"20:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/kongress-centr-imeni-gv-plekhanova/schenyachiy-patrul-smelo-za-delo/\",\"name\":\"Мюзикл «Щенячий патруль. Смело за дело!». Новогоднее представление от Nickelodeon\",\"calendar\":\"\\\"23.12.2017-24.12.2017\\\":\\\"14:00,17:00\\\",\\\"24.12.2017\\\":\\\"11:00\\\",\\\"26.12.2017-27.12.2017\\\":\\\"12:00\\\",\\\"26.12.2017-30.12.2017\\\":\\\"17:00\\\",\\\"28.12.2017-30.12.2017\\\":\\\"14:00\\\",\\\"30.12.2017\\\":\\\"11:00\\\",\\\"2.1.2018-8.1.2018\\\":\\\"11:00,14:00,17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/cirki/cirk-chudes/skolko-stoit-lubov/\",\"name\":\"Мюзикл «Сколько стоит любовь»\",\"calendar\":\"\\\"10.11.2017\\\":\\\"19:00\\\",\\\"14.11.2017\\\":\\\"19:00\\\",\\\"17.11.2017\\\":\\\"19:00\\\",\\\"24.11.2017\\\":\\\"19:00\\\",\\\"7.12.2017\\\":\\\"19:00\\\",\\\"27.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/zolushka/\",\"name\":\"Мюзикл «Золушка»\",\"calendar\":\"\\\"2.12.2017\\\":\\\"12:00\\\",\\\"10.12.2017\\\":\\\"12:00\\\",\\\"6.1.2018\\\":\\\"12:00\\\",\\\"8.1.2018\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/dkit-mai/novogodnie-gonki-2/\",\"name\":\"Мюзикл «Новогодние гонки 2»\",\"calendar\":\"\\\"16.12.2017-17.12.2017\\\":\\\"11:00,14:00,17:00\\\",\\\"23.12.2017-24.12.2017\\\":\\\"11:00,14:00,17:00\\\",\\\"30.12.2017\\\":\\\"11:00,14:00\\\",\\\"2.1.2018-6.1.2018\\\":\\\"11:00,14:00,17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatrium-na-serpukhovke-p-r-terezy-durovoy/duenya/\",\"name\":\"Спектакль «Дуэнья»\",\"calendar\":\"\\\"25.11.2017\\\":\\\"20:00\\\",\\\"24.12.2017\\\":\\\"20:00\\\",\\\"3.1.2018\\\":\\\"20:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-rossiyskoy-armii/3d-shou-pola-negri-pola-negri/\",\"name\":\"3D шоу «Пола Негри» (Pola Negri)\",\"calendar\":\"\\\"21.12.2017-22.12.2017\\\":\\\"20:00\\\",\\\"23.12.2017-24.12.2017\\\":\\\"14:00,19:00\\\",\\\"25.12.2017-29.12.2017\\\":\\\"20:00\\\",\\\"30.12.2017\\\":\\\"19:00\\\",\\\"31.12.2017\\\":\\\"18:00\\\",\\\"2.1.2018-7.1.2018\\\":\\\"19:00\\\",\\\"7.1.2018\\\":\\\"14:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-myuzikla/princessa-cirka/\",\"name\":\"Мюзикл «Принцесса цирка»\",\"calendar\":\"\\\"9.12.2017\\\":\\\"19:00,19:00\\\",\\\"10.12.2017\\\":\\\"14:00,14:00\\\",\\\"12.12.2017-14.12.2017\\\":\\\"19:00\\\",\\\"12.12.2017-13.12.2017\\\":\\\"19:00\\\",\\\"16.12.2017-17.12.2017\\\":\\\"19:00\\\",\\\"16.12.2017\\\":\\\"19:00\\\",\\\"19.12.2017-24.12.2017\\\":\\\"19:00\\\",\\\"23.12.2017-24.12.2017\\\":\\\"19:00\\\",\\\"26.12.2017-30.12.2017\\\":\\\"19:00\\\",\\\"28.12.2017-30.12.2017\\\":\\\"19:00\\\",\\\"31.12.2017\\\":\\\"18:00,18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/fanfan-tyulpan/\",\"name\":\"Спектакль «Фанфан-Тюльпан»\",\"calendar\":\"\\\"10.12.2017\\\":\\\"19:00\\\",\\\"5.1.2018\\\":\\\"13:00,19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-myuzikla/prestuplenie-i-nakazanie/\",\"name\":\"Рок-опера «Преступление и наказание»\",\"calendar\":\"\\\"15.11.2017-18.11.2017\\\":\\\"19:00,19:00\\\",\\\"19.11.2017\\\":\\\"14:00,14:00\\\",\\\"21.11.2017-25.11.2017\\\":\\\"19:00\\\",\\\"24.11.2017-25.11.2017\\\":\\\"19:00\\\",\\\"26.11.2017\\\":\\\"14:00,14:00\\\",\\\"29.11.2017-2.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/moya-prekrasnaya-ledi/\",\"name\":\"Спектакль «Моя прекрасная леди»\",\"calendar\":\"\\\"1.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/volshebnik-izumrudnogo-goroda/\",\"name\":\"Мюзикл «Волшебник изумрудного города»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"12:00,16:00\\\",\\\"3.12.2017\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/gribnoy-perepolokh/\",\"name\":\"Мюзикл «Грибной переполох»\",\"calendar\":\"\\\"11.11.2017-12.11.2017\\\":\\\"12:00\\\",\\\"10.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/kulturnyy-centr-moskvich/cirkovoy-myuzikl-alisa/\",\"name\":\"Цирковой мюзикл «Алиса»\",\"calendar\":\"\\\"23.12.2017\\\":\\\"12:00\\\",\\\"23.12.2017-24.12.2017\\\":\\\"15:00,18:00\\\",\\\"24.12.2017\\\":\\\"12:00\\\",\\\"29.12.2017-2.1.2018\\\":\\\"12:00\\\",\\\"29.12.2017-1.1.2018\\\":\\\"15:00,18:00\\\",\\\"3.1.2018-4.1.2018\\\":\\\"11:00,14:00\\\",\\\"5.1.2018-8.1.2018\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatrium-na-serpukhovke-p-r-terezy-durovoy/letychii-korabl/\",\"name\":\"Мюзикл «Летучий корабль»\",\"calendar\":\"\\\"20.1.2018\\\":\\\"11:00,14:00,17:00\\\",\\\"21.1.2018\\\":\\\"12:00,15:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/rok-opera-yunona-i-avos-teatr-alekseya-rybnikova/\",\"name\":\"Рок-опера «Юнона и Авось»\",\"calendar\":\"\\\"29.11.2017\\\":\\\"19:00\\\",\\\"26.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/myuzikl-dzheyn-eyr/\",\"name\":\"Мюзикл «Джейн Эйр»\",\"calendar\":\"\\\"8.1.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/volshebnaya-lampa-aladdina/\",\"name\":\"Мюзикл «Волшебная лампа Аладдина»\",\"calendar\":\"\\\"2.1.2018-8.1.2018\\\":\\\"11:00,15:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/ostrov-sokrovisch/\",\"name\":\"Мюзикл «Остров сокровищ»\",\"calendar\":\"\\\"11.11.2017\\\":\\\"12:00,16:00\\\",\\\"4.1.2018\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/moskovskiy-oblastnoy-teatr-yunogo-zritelya-mogtyuz/ledi-sovershenstvo-s-grishaevoy/\",\"name\":\"Мюзикл «Леди Совершенство» с Н. Гришаевой\",\"calendar\":\"\\\"12.11.2017\\\":\\\"16:00\\\",\\\"25.11.2017\\\":\\\"16:00\\\",\\\"2.12.2017\\\":\\\"16:00\\\",\\\"27.1.2018\\\":\\\"16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/muzykalnyy-teatr-ayvengo-v-izmaylovo/ballada-o-malenkom-serdce/\",\"name\":\"Спектакль «Баллада о маленьком сердце»\",\"calendar\":\"\\\"12.11.2017\\\":\\\"18:00\\\",\\\"25.11.2017\\\":\\\"18:00\\\",\\\"26.11.2017\\\":\\\"17:00\\\",\\\"2.12.2017\\\":\\\"18:00\\\",\\\"9.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/moskovskiy-oblastnoy-teatr-yunogo-zritelya-mogtyuz/ledi-sovershenstvo-s-bystrovoy/\",\"name\":\"Мюзикл «Леди Совершенство» с Н. Быстровой\",\"calendar\":\"\\\"12.11.2017\\\":\\\"12:00\\\",\\\"25.11.2017\\\":\\\"12:00\\\",\\\"2.12.2017\\\":\\\"12:00\\\",\\\"7.1.2018\\\":\\\"12:00\\\",\\\"27.1.2018\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/kino-kholl-vgik/poymay-menya-esli-smozhesh/\",\"name\":\"Мюзикл «Поймай меня, если сможешь»\",\"calendar\":\"\\\"24.11.2017-25.11.2017\\\":\\\"19:00\\\",\\\"1.12.2017-2.12.2017\\\":\\\"19:00\\\",\\\"15.12.2017-16.12.2017\\\":\\\"19:00\\\",\\\"17.12.2017\\\":\\\"18:00\\\",\\\"2.1.2018-4.1.2018\\\":\\\"20:00\\\",\\\"7.1.2018\\\":\\\"19:00\\\",\\\"8.1.2018\\\":\\\"15:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/iisus-khristos-superzvezda/\",\"name\":\"Рок-опера «Иисус Христос – суперзвезда»\",\"calendar\":\"\\\"14.11.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/cezar-i-kleopatra/\",\"name\":\"Спектакль «Цезарь и Клеопатра»\",\"calendar\":\"\\\"12.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/myuzik-kholl/shkola-lesnoi-magii/\",\"name\":\"Мюзикл «Школа лесной магии»\",\"calendar\":\"\\\"12.11.2017\\\":\\\"12:00\\\",\\\"25.11.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/spectakl-volshebnik-izumrudnogo-goroda/\",\"name\":\"Мюзикл «Волшебник Изумрудного города»\",\"calendar\":\"\\\"7.1.2018\\\":\\\"11:00,14:30,18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-im-vl-mayakovskogo/mama-kot/\",\"name\":\"Детский спектакль «Мама-Кот»\",\"calendar\":\"\\\"6.11.2017\\\":\\\"12:00\\\",\\\"23.12.2017\\\":\\\"12:00\\\",\\\"30.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/peppi-dlinnyychulok/\",\"name\":\"Спектакль «Пеппи Длинныйчулок»\",\"calendar\":\"\\\"26.11.2017\\\":\\\"13:00,13:00,17:00,17:00\\\",\\\"2.12.2017-3.12.2017\\\":\\\"12:00\\\",\\\"2.12.2017\\\":\\\"12:00\\\",\\\"27.1.2018\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/dk-zareche/chelovek-amfibiya/\",\"name\":\"Мюзикл «Человек-амфибия»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/oliver-tvist/\",\"name\":\"Мюзикл «Оливер Твист»\",\"calendar\":\"\\\"11.11.2017-12.11.2017\\\":\\\"12:00\\\",\\\"11.11.2017\\\":\\\"16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-estrady/shkodnyy-myuzikl/\",\"name\":\"Мюзикл «Шкодный мюзикл»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-teatr-estrady/master-i-margarita-myuzikl/\",\"name\":\"Спектакль «Мастер и Маргарита»\",\"calendar\":\"\\\"26.11.2017\\\":\\\"19:00\\\",\\\"23.12.2017\\\":\\\"19:00\\\",\\\"7.1.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/sadko-i-carevna-morskaya/\",\"name\":\"Мюзикл «Садко и Царевна Морская»\",\"calendar\":\"\\\"3.12.2017\\\":\\\"12:00\\\",\\\"16.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/kapitanskaya-dochka/\",\"name\":\"Мюзикл «Капитанская дочка»\",\"calendar\":\"\\\"5.11.2017\\\":\\\"18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/priklucheniya-olivera-tvista/\",\"name\":\"Мюзикл «Приключения Оливера Твиста»\",\"calendar\":\"\\\"6.11.2017\\\":\\\"12:00,12:00\\\",\\\"20.1.2018-21.1.2018\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/snezhnaya-koroleva/\",\"name\":\"Детский спектакль «Снежная королева»\",\"calendar\":\"\\\"10.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/rok-opera-yunona-i-avos-teatr-alekseya-rybnikov/\",\"name\":\"Рок-опера «Юнона и Авось» Театр Алексея Рыбников\",\"calendar\":\"\\\"21.1.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/dvorec-kultury-rublevo/kak-zhit-zamuzhem/\",\"name\":\"Спектакль «Как жить замужем»\",\"calendar\":\"\\\"12.11.2017\\\":\\\"18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-luny/meri-poppins-next/\",\"name\":\"Спектакль «Мэри Поппинс Next»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"18:00\\\",\\\"19.11.2017\\\":\\\"12:00,16:00\\\",\\\"16.12.2017\\\":\\\"18:00\\\",\\\"17.12.2017\\\":\\\"14:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/novogodniy-myuzikl-volk-i-semero-kozlyat-na-novyy-lad/\",\"name\":\"Новогодний мюзикл «Волк и семеро козлят на новый лад»\",\"calendar\":\"\\\"2.1.2018-6.1.2018\\\":\\\"11:00,17:00\\\",\\\"2.1.2018-4.1.2018\\\":\\\"14:00\\\",\\\"6.1.2018\\\":\\\"14:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/myuzik-kholl/priklyucheniya-toma-soyera/\",\"name\":\"Спектакль «Приключения Тома Сойера»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"12:00,12:00\\\",\\\"17.12.2017\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/bremenskie-muzykanty/\",\"name\":\"Мюзикл «Бременские музыканты»\",\"calendar\":\"\\\"25.11.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-romen/zolushka/\",\"name\":\"Мюзикл «Золушка»\",\"calendar\":\"\\\"9.12.2017\\\":\\\"17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/gambrinus/\",\"name\":\"Спектакль «Гамбринус»\",\"calendar\":\"\\\"30.11.2017\\\":\\\"19:00\\\",\\\"19.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/nedorosl/\",\"name\":\"Мюзикл «Недоросль»\",\"calendar\":\"\\\"24.11.2017\\\":\\\"19:00\\\",\\\"8.12.2017\\\":\\\"19:00\\\",\\\"15.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-romen/pirat-i-prizraki/\",\"name\":\"Детский спектакль «Пират и призраки»\",\"calendar\":\"\\\"12.11.2017\\\":\\\"17:00\\\",\\\"9.12.2017\\\":\\\"12:00\\\",\\\"10.12.2017\\\":\\\"17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/centr-dramaturgii-i-rezhissury/bratec-krolik-bratec-lis/\",\"name\":\"Мюзикл «Братец Кролик, Братец Лис»\",\"calendar\":\"\\\"26.11.2017\\\":\\\"11:00\\\",\\\"30.12.2017\\\":\\\"11:00\\\",\\\"2.1.2018-3.1.2018\\\":\\\"11:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/kak-possorilsya-ii-s-in/\",\"name\":\"Спектакль «Как поссорился И.И. с И.Н.»\",\"calendar\":\"\\\"22.11.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/lukomore/\",\"name\":\"Мюзикл «Лукоморье»\",\"calendar\":\"\\\"3.12.2017\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-muzykalno-dramatichskiy-teatr-a-ya/kak-obezyana-morskogo-carya-perekhitrila/\",\"name\":\"Мюзикл «Как обезьяна морского царя перехитрила»\",\"calendar\":\"\\\"16.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/dk-im-zueva/bremenskie-muzykanty-vozvraschenie-legendy/\",\"name\":\"Мюзикл «Бременские музыканты – возвращение легенды!»\",\"calendar\":\"\\\"26.11.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/novyy-dramaticheskiy-teatr/morozko/\",\"name\":\"Мюзикл «Морозко»\",\"calendar\":\"\\\"23.12.2017\\\":\\\"11:00\\\",\\\"23.12.2017-30.12.2017\\\":\\\"14:00\\\",\\\"23.12.2017-29.12.2017\\\":\\\"17:00\\\",\\\"25.12.2017-26.12.2017\\\":\\\"11:00\\\",\\\"28.12.2017-30.12.2017\\\":\\\"11:00\\\",\\\"2.1.2018-8.1.2018\\\":\\\"11:00,14:00\\\",\\\"2.1.2018-4.1.2018\\\":\\\"17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/moskovskaya-istoriya-1205/\",\"name\":\"Мюзикл «Московская история 1205»\",\"calendar\":\"\\\"9.12.2017-10.12.2017\\\":\\\"12:00,16:00\\\",\\\"3.2.2018-4.2.2018\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/kino-kholl-vgik/schelkunchik-i-myshinyy-korol/\",\"name\":\"Мюзикл «Щелкунчик и мышиный король»\",\"calendar\":\"\\\"30.12.2017\\\":\\\"12:00,15:00\\\",\\\"31.12.2017\\\":\\\"12:00,15:00\\\",\\\"3.1.2018-6.1.2018\\\":\\\"12:00,15:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/sindbad-morekhod/\",\"name\":\"Спектакль «Синдбад-мореход»\",\"calendar\":\"\\\"20.1.2018\\\":\\\"13:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/filial-teatra-pushkina/rozhdestvo-ogenri/\",\"name\":\"Мюзикл «Рождество О.Генри»\",\"calendar\":\"\\\"6.1.2018\\\":\\\"14:00\\\",\\\"6.1.2018-7.1.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-myuzikla/chudesa-i-kuralesy/\",\"name\":\"Спектакль «Чудеса и куралесы»\",\"calendar\":\"\\\"23.12.2017-24.12.2017\\\":\\\"14:00\\\",\\\"24.12.2017\\\":\\\"14:00\\\",\\\"30.12.2017\\\":\\\"14:00\\\",\\\"31.12.2017\\\":\\\"13:00,13:00\\\",\\\"3.1.2018-8.1.2018\\\":\\\"14:00\\\",\\\"7.1.2018\\\":\\\"14:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-snezhnaya-koroleva-kamernyy-muzykalnyy-teatr-el-art/\",\"name\":\"Мюзикл «Снежная королева». Камерный музыкальный театр «Эль Арт»\",\"calendar\":\"\\\"24.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/kulturnyy-centr-zil/3d-mapping-shou-chernomor/\",\"name\":\"3D mapping шоу «Черномор»\",\"calendar\":\"\\\"2.1.2018-3.1.2018\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/todd-5-let-den-rozhdeniya-rok-myuzikla/\",\"name\":\"Зонг-опера «TODD». 5 лет! День рождения рок-мюзикла!\",\"calendar\":\"\\\"9.11.2017-10.11.2017\\\":\\\"20:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-ekspromt/ali-baba-i-40-razboynikov/\",\"name\":\"Спектакль «Али-баба и 40 разбойников»\",\"calendar\":\"\\\"26.11.2017\\\":\\\"12:00,15:00\\\",\\\"10.12.2017\\\":\\\"12:00,15:00\\\",\\\"28.1.2018\\\":\\\"12:00,15:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-novogodnie-priklyucheniya-malenkikh-volshebnikov/\",\"name\":\"Мюзикл «Новогодние приключения маленьких волшебников»\",\"calendar\":\"\\\"22.12.2017\\\":\\\"14:00,19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/3d-myuzikl-alisa-v-strane-chudes/\",\"name\":\"3D мюзикл «Алиса в стране чудес»\",\"calendar\":\"\\\"25.11.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/sportivnye-kompleksy/ok-luzhniki/ledovyy-myuzikl-drakula-istoriya-vechnoy-lyubvi/\",\"name\":\"Ледовый мюзикл «Дракула. История вечной любви»\",\"calendar\":\"\\\"3.12.2017\\\":\\\"16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/iisus-khristos-superzvezda/\",\"name\":\"Рок-опера «Иисус Христос – суперзвезда»\",\"calendar\":\"\\\"25.3.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/moy-samyy-luchshiy-papa/\",\"name\":\"Спектакль «Мой самый лучший папа»\",\"calendar\":\"\\\"19.11.2017\\\":\\\"17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-kapitanskaya-dochka/\",\"name\":\"Мюзикл «Капитанская дочка»\",\"calendar\":\"\\\"18.2.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/bednaya-liza/\",\"name\":\"Мюзикл «Бедная Лиза»\",\"calendar\":\"\\\"29.11.2017\\\":\\\"19:00\\\",\\\"17.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-zolotoe-kolco/yunona-i-avos/\",\"name\":\"Рок-опера «Юнона и Авось»\",\"calendar\":\"\\\"9.12.2017\\\":\\\"19:00\\\"\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./php/data.json\n// module id = 2\n// module chunks = 0","import ExtBackground from \"./ExtBackground\";\n\nexport default class AfishaBackground extends ExtBackground{\n  constructor(options={}){\n    super(options);\n    this.state.mode='Real';\n    this.state.baseUrl='https://www.ticketland.ru';\n    this.state.startUrl=this.state.baseUrl+'/musical/';\n  }\n  onBrowserAction(tab){\n    switch(this.state.mode){\n      case 'Gen':\n        this.onBrowserActionGen(tab);\n      break;\n      case 'Post':\n        this.onBrowserActionPost(tab);\n      break;\n      case 'Real':\n        this.onBrowserActionReal(tab);\n      break;\n    }\n  }\n  onBrowserActionGen(tab){\n    let buf=[];\n    this.state.options.locData.forEach(item=>{\n      if(this.state.options.urls[item.url]){\n        buf.push(`\"${item.url}\":${this.state.options.urls[item.url]}`);\n      } else {\n        buf.push(`\"${item.url}\":\"\"`);\n      };\n    });\n    console.log(buf.join(\",\\n\"));\n  }\n  onBrowserActionPost(tab){\n    let query=Promise.resolve();\n    this.state.options.locData.forEach(item=>{\n      query=query\n      .then(()=>{\n        if(this.state.options.urls[item.url]){\n          let fd=new FormData();\n          fd.append('uid',this.state.options.urls[item.url]);\n          fd.append('agenda',item.calendar);\n          return this.extFetch('http://musicals.ru/afisha.php',{method:'POST',body:fd},\"text\",\"Can't store afisha\")\n          .then(text=>{\n            console.log(\"Stored: \",item.name);\n          })\n          .then(()=>this.pause(1000));\n        } else {\n          console.log(\"Can't post:\",item.name);\n          console.log(item.url);\n        }\n      })\n    });\n  }\n  onBrowserActionReal(tab){\n//NOTE: load first page\n    if(!this.inProgress){\n      grabSource();\n    } else {\n      console.log(\"Plugin is busy!\");\n    }\n  }\n\n  grabSource(){\n    this.state.musicals={};\n    this.inProgress=true;\n    this.extFetch(this.state.startUrl,{},\"dom\")\n    .then(dom=>{\n//NOTE:parse pages\n        let queue=Promise.resolve();\n        let list=dom.querySelectorAll(\".paginator a[data-page]\");\n        for(let cnt=0,m=list.length;cnt<m;cnt++){\n          if(cnt==0){\n            queue=queue\n            .then(()=>this.parsePage('',dom));\n          } else {\n            //continue;\n            queue=queue\n            .then(()=>this.pause(1000))\n            .then(()=>this.parsePage(this.state.baseUrl+list[cnt].attributes['href'].value,null));\n          }\n        };\n        queue=queue.then(()=>{\n          if(this.state.options.verbose){\n            console.log(\"Done!\");\n          };\n          //NOTE: we can save loaded calendar\n          let fd=new FormData();\n          let dataToSend=[];\n          for(let o in this.state.musicals){\n            let item=this.state.musicals[o];\n            dataToSend.push({\n              url:item.url,\n              name:item.name,\n              calendar:item.calendar\n            });\n          }\n          fd.append('data',JSON.stringify(dataToSend));\n          return extFetch(\"http://localhost/afishaReader/php/store.php\",{\n            method:'POST',\n            body:fd\n          });\n          this.inProgress=false;\n        })\n        return queue;\n    })\n    .catch(err=>{\n      console.log(err);\n    })\n  }\n\n  parsePage(url,dom){\n    if(!dom){\n      if(this.state.options.verbose){\n        console.log(\"let's fetch url first\",url);\n      };\n      return this.extFetch(url,{},'dom')\n      .then(dom=>this.parsePage(url,dom));\n    } else {\n      if(this.state.options.verbose){\n        console.log(\"there is a dom, let's parse it!\");\n      };\n      let list=dom.querySelectorAll('.show_room_search .search_item .showinf .showname a');\n      let queue=Promise.resolve();\n      for(let cnt=0,m=list.length;cnt<m;cnt++){\n        if(cnt!=0){\n          queue=queue.then(()=>this.pause(1000));\n        };\n        queue=queue.then(()=>this.parseMusical(this.state.baseUrl+list[cnt].attributes['href'].value));\n      };\n      return queue;\n    }\n  }\n  parseMusical(url){\n    if(this.state.options.verbose){\n      console.log(\"Let's parse musical\",url);\n    };\n    let musical={\n      url:url\n    };\n    return this.extFetch(url,{},'dom')\n    .then(dom=>{\n      musical.name=dom.querySelector('.showtitle .name').innerHTML;\n      musical.shows=[];\n      let shows=dom.querySelectorAll('.show_box .show_list .show_item');\n      for(let cnt=0,m=shows.length;cnt<m;cnt++){\n        let d=shows[cnt].querySelector('.day_number_title[itemprop=\"startDate\"]');\n        let u=shows[cnt].querySelector('.buy_button [itemprop=url]');\n        let p=shows[cnt].querySelector('.price [itemprop=price]');\n        musical.shows.push({\n          date:d?new Date(Date.parse(d.attributes['content'].value)):'',\n          url:u?this.state.baseUrl+u.attributes['href'].value:'',\n          price:p?p.innerHTML:''\n        });\n      }\n      musical.calendar=this.compileCalendar(musical.shows);\n      if(this.state.options.verbose){\n        console.log(musical);\n      }\n      this.state.musicals[url]=musical;\n    })\n  }\n//NOTE: calendar compilation\n  compileCalendar(shows){\n    let rules=[];\n    shows.forEach(item=>{\n      let ms=item.date.getTime();\n      let itemRules=rules.filter(rule=>{\n          return this.checkAfishaRule(rule.endDate.getTime(),ms);\n      })\n      if(itemRules.length){\n        itemRules[0].endDate=item.date;\n      } else {\n        rules.push(Object.assign({startDate:item.date,endDate:item.date,time:this.formTime(item.date)},item));\n      }\n    });\n\n    let rules2={};\n    rules.forEach(rule=>{\n      let dates=(rule.startDate.getTime()!=rule.endDate.getTime())?\n        this.formDate(rule.startDate)+'-'+this.formDate(rule.endDate):\n        this.formDate(rule.startDate);\n\n      if(rules2[dates]){\n        rules2[dates].time+=','+rule.time;\n      } else {\n        rules2[dates]=Object.assign({},rule,{dates:dates});\n      }\n    });\n    rules=[];\n    for(let o in rules2){\n      rules.push(rules2[o]);\n    };\n\n    return rules.map(rule=>{\n      return `\"${rule.dates}\":\"${rule.time}\"`;\n    }).join(',');\n  }\n\n  checkAfishaRule(date1,date2){\n    let checkDate=new Date(date1);\n    checkDate.setDate(checkDate.getDate()+1);\n    return checkDate.getTime()==date2;\n  }\n\n  formTime(date){\n    let m=date.getMinutes();\n    let ret=date.getHours()+':';\n    if(m<10){\n      ret+='0';\n    };\n    ret+=m;\n    return ret;\n  }\n\n  formDate(date){\n    return date.getDate()+'.'+(date.getMonth()+1)+'.'+date.getFullYear();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/classes/AfishaBackground.js","import Background from \"./Background\";\nimport CONST from './constants';\n\nexport default class ExtBackground extends Background{\n  constructor(options={}){\n    super(options);\n    this.state.stage=CONST.STARTING;\n  }\n  extFetch(url,options={},output,errorMes=\"There is extFetch error\"){\n    if(this.state.options.verbose){\n      console.log(\"extFetch: \",url);\n    };\n    return fetch(url,options)\n    .then(response=>{\n      if(response.ok){\n        switch(output.toLowerCase()){\n          case 'dom':\n            return response.text()\n            .then(text=>{\n              let parser=new DOMParser();\n              return parser.parseFromString(text,\"text/html\");\n            });\n          break;\n          default:\n            return response[output]();\n        }\n      } else {\n        throw new Error(errorMes);\n      }\n    })\n    .catch(err=>{\n      console.log(\"extFetch error: \",err);\n      throw err;\n    })\n  }\n  pause(delay,ret='',message=`Pause :${delay}`){\n    if(this.state.options.verbose){\n      console.log(message);\n    };\n    return new Promise((resolve,reject)=>{\n      setTimeout(()=>{\n          resolve(ret);\n      },delay);\n    })\n  }\n  onPluginMessage(request,sender,sendResponse){\n    if(request.action){\n      doAction(request.action,request.data,sender);\n    }\n  }\n  reAction(action,data={},delay=10){\n    return this.pause(delay).then(()=>this.doAction(action,data));\n  }\n  doAction(action,data={},sender=null){\n    //TODO: implement default switch\n    switch(action){\n      default:\n        this.reDraw();\n    }\n  }\n  reDraw(){\n    //TODO: implement reDraw\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/classes/ExtBackground.js","export default class Background {\n  constructor(options={}){\n    const defOptions={\n        receivePluginMessages:true,\n        browserAction:false,\n        verbose:false,\n        receiveNotesClick:false\n    };\n    this.state=Object.assign({},{options:Object.assign({},defOptions,options)});\n    if(this.state.options.verbose){\n      console.log(\"Started background\");\n    };\n    if(this.state.options.browserAction){\n      browser.browserAction.onClicked.addListener((tab)=>this.onBrowserAction.bind(this,tab)(tab));\n    };\n    if(this.state.options.receivePluginMessages){\n      browser.runtime.onMessage.addListener((request, sender, sendResponse) => this.onPluginMessage.bind(this,request,sender,sendResponse)(request, sender, sendResponse))\n    };\n    if(this.state.options.receiveNotesClick){\n      browser.notifications.onClicked.addListener(noteId => this.onNoteClick.bind(this,noteId)(noteId));\n    };\n  }\n  onBrowserAction(tab){\n    //NOTE: click on bar button, tab - is an active tab data\n  }\n  onPluginMessage(request,sender,sendResponse){\n    //NOTE: receive a message from plugin script\n  }\n  onNoteClick(noteId){\n    //NOTE: click on a note\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Background.js","export default {\n  STARTING:\"starting\",\n  WAIT:\"wait\",\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/classes/constants.js"],"sourceRoot":""}
{"version":3,"sources":["webpack:///webpack/bootstrap e644cc663c1b5449312e","webpack:///./src/background.js","webpack:///./src/urls.json","webpack:///./php/data.json","webpack:///./src/classes/AfishaBackground.js","webpack:///./src/classes/Background.js","webpack:///./src/constants.js"],"names":["bg","verbose","browserAction","receivePluginMessages","urls","locData","AfishaBackground","options","baseUrl","startUrl","url","output","errorMes","console","log","fetch","then","response","ok","toLowerCase","text","parser","DOMParser","parseFromString","Error","catch","err","delay","ret","message","Promise","resolve","reject","setTimeout","tab","buf","forEach","item","push","join","query","fd","FormData","append","calendar","extFetch","method","body","name","pause","inProgress","musicals","queue","list","dom","querySelectorAll","cnt","m","parsePage","attributes","value","length","dataToSend","o","JSON","stringify","parseMusical","musical","querySelector","innerHTML","shows","d","u","p","date","Date","parse","price","compileCalendar","rules","ms","getTime","itemRules","filter","checkAfishaRule","rule","endDate","Object","assign","startDate","time","formTime","rules2","dates","formDate","map","date1","date2","checkDate","setDate","getDate","getMinutes","getHours","getMonth","getFullYear","Background","defOptions","receiveNotesClick","states","browser","onClicked","addListener","onBrowserAction","bind","runtime","onMessage","request","sender","sendResponse","onPluginMessage","notifications","onNoteClick","noteId","MODE_STARTING","MODE_WAIT"],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e644cc663c1b5449312e","import urls from './urls.json';\nimport locData from '../php/data.json';\nimport AfishaBackground from './classes/AfishaBackground';\nimport CONST from './constants';\n\nconst bg=new AfishaBackground({\n  verbose:false,\n  browserAction:true,\n  receivePluginMessages:false,\n  urls:urls,\n  locData:locData\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/background.js","module.exports = {\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/\":218,\"https://www.ticketland.ru/teatry/teatr-operetty/anna-karenina/\":188,\"https://www.ticketland.ru/teatry/teatr-satiry/dorogi-kotorye-nas-vybirayut/\":40,\"https://www.ticketland.ru/teatry/teatr-operetty/maugli/\":12,\"https://www.ticketland.ru/teatry/teatr-russkaya-pesnya-malaya-scena/noch-pered-rozhdestvom/\":195,\"https://www.ticketland.ru/doma-kultury/kongress-centr-imeni-gv-plekhanova/schenyachiy-patrul-smelo-za-delo/\":\"\",\"https://www.ticketland.ru/cirki/cirk-chudes/skolko-stoit-lubov/\":80,\"https://www.ticketland.ru/teatry/teatr-operetty/zolushka/\":41,\"https://www.ticketland.ru/doma-kultury/dkit-mai/novogodnie-gonki-2/\":\"\",\"https://www.ticketland.ru/teatry/teatrium-na-serpukhovke-p-r-terezy-durovoy/duenya/\":163,\"https://www.ticketland.ru/teatry/teatr-rossiyskoy-armii/3d-shou-pola-negri-pola-negri/\":137,\"https://www.ticketland.ru/teatry/teatr-myuzikla/princessa-cirka/\":186,\"https://www.ticketland.ru/teatry/teatr-operetty/fanfan-tyulpan/\":24,\"https://www.ticketland.ru/teatry/teatr-myuzikla/prestuplenie-i-nakazanie/\":184,\"https://www.ticketland.ru/teatry/teatr-operetty/moya-prekrasnaya-ledi/\":42,\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/volshebnik-izumrudnogo-goroda/\":19,\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/gribnoy-perepolokh/\":132,\"https://www.ticketland.ru/doma-kultury/kulturnyy-centr-moskvich/cirkovoy-myuzikl-alisa/\":\"\",\"https://www.ticketland.ru/teatry/teatrium-na-serpukhovke-p-r-terezy-durovoy/letychii-korabl/\":56,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/rok-opera-yunona-i-avos-teatr-alekseya-rybnikova/\":62,\"https://www.ticketland.ru/teatry/teatr-operetty/myuzikl-dzheyn-eyr/\":136,\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/volshebnaya-lampa-aladdina/\":196,\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/ostrov-sokrovisch/\":32,\"https://www.ticketland.ru/teatry/moskovskiy-oblastnoy-teatr-yunogo-zritelya-mogtyuz/ledi-sovershenstvo-s-grishaevoy/\":185,\"https://www.ticketland.ru/teatry/muzykalnyy-teatr-ayvengo-v-izmaylovo/ballada-o-malenkom-serdce/\":182,\"https://www.ticketland.ru/teatry/moskovskiy-oblastnoy-teatr-yunogo-zritelya-mogtyuz/ledi-sovershenstvo-s-bystrovoy/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/kino-kholl-vgik/poymay-menya-esli-smozhesh/\":187,\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/iisus-khristos-superzvezda/\":53,\"https://www.ticketland.ru/teatry/teatr-operetty/cezar-i-kleopatra/\":43,\"https://www.ticketland.ru/koncertnye-zaly/myuzik-kholl/shkola-lesnoi-magii/\":152,\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/spectakl-volshebnik-izumrudnogo-goroda/\":19,\"https://www.ticketland.ru/teatry/teatr-im-vl-mayakovskogo/mama-kot/\":126,\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/peppi-dlinnyychulok/\":178,\"https://www.ticketland.ru/doma-kultury/dk-zareche/chelovek-amfibiya/\":29,\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/oliver-tvist/\":151,\"https://www.ticketland.ru/teatry/teatr-estrady/shkodnyy-myuzikl/\":206,\"https://www.ticketland.ru/teatry/detskiy-teatr-estrady/master-i-margarita-myuzikl/\":59,\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/sadko-i-carevna-morskaya/\":176,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/kapitanskaya-dochka/\":210,\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/priklucheniya-olivera-tvista/\":17,\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/snezhnaya-koroleva/\":69,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/rok-opera-yunona-i-avos-teatr-alekseya-rybnikov/\":62,\"https://www.ticketland.ru/doma-kultury/dvorec-kultury-rublevo/kak-zhit-zamuzhem/\":100,\"https://www.ticketland.ru/teatry/teatr-luny/meri-poppins-next/\":22,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/novogodniy-myuzikl-volk-i-semero-kozlyat-na-novyy-lad/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/myuzik-kholl/priklyucheniya-toma-soyera/\":181,\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/bremenskie-muzykanty/\":115,\"https://www.ticketland.ru/teatry/teatr-romen/zolushka/\":\"\",\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/gambrinus/\":102,\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/nedorosl/\":169,\"https://www.ticketland.ru/teatry/teatr-romen/pirat-i-prizraki/\":121,\"https://www.ticketland.ru/teatry/centr-dramaturgii-i-rezhissury/bratec-krolik-bratec-lis/\":166,\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/kak-possorilsya-ii-s-in/\":35,\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/lukomore/\":92,\"https://www.ticketland.ru/teatry/detskiy-muzykalno-dramatichskiy-teatr-a-ya/kak-obezyana-morskogo-carya-perekhitrila/\":197,\"https://www.ticketland.ru/doma-kultury/dk-im-zueva/bremenskie-muzykanty-vozvraschenie-legendy/\":155,\"https://www.ticketland.ru/teatry/novyy-dramaticheskiy-teatr/morozko/\":\"\",\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/moskovskaya-istoriya-1205/\":87,\"https://www.ticketland.ru/koncertnye-zaly/kino-kholl-vgik/schelkunchik-i-myshinyy-korol/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/sindbad-morekhod/\":\"\",\"https://www.ticketland.ru/teatry/filial-teatra-pushkina/rozhdestvo-ogenri/\":157,\"https://www.ticketland.ru/teatry/teatr-myuzikla/chudesa-i-kuralesy/\":223,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-snezhnaya-koroleva-kamernyy-muzykalnyy-teatr-el-art/\":201,\"https://www.ticketland.ru/doma-kultury/kulturnyy-centr-zil/3d-mapping-shou-chernomor/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/todd-5-let-den-rozhdeniya-rok-myuzikla/\":\"\",\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-ekspromt/ali-baba-i-40-razboynikov/\":164,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-novogodnie-priklyucheniya-malenkikh-volshebnikov/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/3d-myuzikl-alisa-v-strane-chudes/\":191,\"https://www.ticketland.ru/sportivnye-kompleksy/ok-luzhniki/ledovyy-myuzikl-drakula-istoriya-vechnoy-lyubvi/\":\"\",\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/iisus-khristos-superzvezda/\":117,\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/moy-samyy-luchshiy-papa/\":217,\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-kapitanskaya-dochka/\":210,\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/bednaya-liza/\":104,\"https://www.ticketland.ru/teatry/teatr-zolotoe-kolco/yunona-i-avos/\":\"\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/urls.json\n// module id = 1\n// module chunks = 0","module.exports = [{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/\",\"name\":\"Мюзикл «Привидение»\",\"calendar\":\"\\\"5.11.2017-6.11.2017\\\":\\\"13:00,18:00\\\",\\\"8.11.2017\\\":\\\"19:00\\\",\\\"11.11.2017-12.11.2017\\\":\\\"13:00,18:00\\\",\\\"14.11.2017-17.11.2017\\\":\\\"19:00\\\",\\\"18.11.2017-19.11.2017\\\":\\\"13:00,18:00\\\",\\\"21.11.2017-23.11.2017\\\":\\\"19:00\\\",\\\"25.11.2017-26.11.2017\\\":\\\"13:00,18:00\\\",\\\"29.11.2017-30.11.2017\\\":\\\"19:00\\\",\\\"2.12.2017-3.12.2017\\\":\\\"13:00,18:00\\\",\\\"5.12.2017-6.12.2017\\\":\\\"19:00\\\",\\\"8.12.2017-11.12.2017\\\":\\\"19:00\\\",\\\"9.12.2017-10.12.2017\\\":\\\"14:00\\\",\\\"13.12.2017-14.12.2017\\\":\\\"19:00\\\",\\\"17.12.2017\\\":\\\"13:00,18:00\\\",\\\"19.12.2017\\\":\\\"19:00\\\",\\\"23.12.2017\\\":\\\"14:00,19:00\\\",\\\"29.12.2017\\\":\\\"19:00\\\",\\\"30.12.2017-31.12.2017\\\":\\\"13:00,18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/anna-karenina/\",\"name\":\"Мюзикл «Анна Каренина»\",\"calendar\":\"\\\"8.11.2017-19.11.2017\\\":\\\"19:00\\\",\\\"11.11.2017-12.11.2017\\\":\\\"14:00\\\",\\\"18.11.2017-19.11.2017\\\":\\\"14:00\\\",\\\"15.12.2017-17.12.2017\\\":\\\"19:00\\\",\\\"16.12.2017-17.12.2017\\\":\\\"14:00\\\",\\\"19.12.2017-20.12.2017\\\":\\\"19:00\\\",\\\"22.12.2017-24.12.2017\\\":\\\"19:00\\\",\\\"23.12.2017-24.12.2017\\\":\\\"14:00\\\",\\\"26.12.2017-30.12.2017\\\":\\\"19:00\\\",\\\"30.12.2017\\\":\\\"14:00\\\",\\\"31.12.2017\\\":\\\"18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-satiry/dorogi-kotorye-nas-vybirayut/\",\"name\":\"Спектакль «Дороги, которые нас выбирают»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"19:00\\\",\\\"22.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/maugli/\",\"name\":\"Детский спектакль «Маугли»\",\"calendar\":\"\\\"5.11.2017\\\":\\\"12:00\\\",\\\"3.12.2017\\\":\\\"12:00\\\",\\\"4.1.2018\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-russkaya-pesnya-malaya-scena/noch-pered-rozhdestvom/\",\"name\":\"Мюзикл «Ночь перед Рождеством»\",\"calendar\":\"\\\"7.11.2017\\\":\\\"19:00\\\",\\\"27.12.2017-30.12.2017\\\":\\\"20:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/kongress-centr-imeni-gv-plekhanova/schenyachiy-patrul-smelo-za-delo/\",\"name\":\"Мюзикл «Щенячий патруль. Смело за дело!». Новогоднее представление от Nickelodeon\",\"calendar\":\"\\\"23.12.2017-24.12.2017\\\":\\\"14:00,17:00\\\",\\\"24.12.2017\\\":\\\"11:00\\\",\\\"26.12.2017-27.12.2017\\\":\\\"12:00\\\",\\\"26.12.2017-30.12.2017\\\":\\\"17:00\\\",\\\"28.12.2017-30.12.2017\\\":\\\"14:00\\\",\\\"30.12.2017\\\":\\\"11:00\\\",\\\"2.1.2018-8.1.2018\\\":\\\"11:00,14:00,17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/cirki/cirk-chudes/skolko-stoit-lubov/\",\"name\":\"Мюзикл «Сколько стоит любовь»\",\"calendar\":\"\\\"10.11.2017\\\":\\\"19:00\\\",\\\"14.11.2017\\\":\\\"19:00\\\",\\\"17.11.2017\\\":\\\"19:00\\\",\\\"24.11.2017\\\":\\\"19:00\\\",\\\"7.12.2017\\\":\\\"19:00\\\",\\\"27.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/zolushka/\",\"name\":\"Мюзикл «Золушка»\",\"calendar\":\"\\\"2.12.2017\\\":\\\"12:00\\\",\\\"10.12.2017\\\":\\\"12:00\\\",\\\"6.1.2018\\\":\\\"12:00\\\",\\\"8.1.2018\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/dkit-mai/novogodnie-gonki-2/\",\"name\":\"Мюзикл «Новогодние гонки 2»\",\"calendar\":\"\\\"16.12.2017-17.12.2017\\\":\\\"11:00,14:00,17:00\\\",\\\"23.12.2017-24.12.2017\\\":\\\"11:00,14:00,17:00\\\",\\\"30.12.2017\\\":\\\"11:00,14:00\\\",\\\"2.1.2018-6.1.2018\\\":\\\"11:00,14:00,17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatrium-na-serpukhovke-p-r-terezy-durovoy/duenya/\",\"name\":\"Спектакль «Дуэнья»\",\"calendar\":\"\\\"25.11.2017\\\":\\\"20:00\\\",\\\"24.12.2017\\\":\\\"20:00\\\",\\\"3.1.2018\\\":\\\"20:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-rossiyskoy-armii/3d-shou-pola-negri-pola-negri/\",\"name\":\"3D шоу «Пола Негри» (Pola Negri)\",\"calendar\":\"\\\"21.12.2017-22.12.2017\\\":\\\"20:00\\\",\\\"23.12.2017-24.12.2017\\\":\\\"14:00,19:00\\\",\\\"25.12.2017-29.12.2017\\\":\\\"20:00\\\",\\\"30.12.2017\\\":\\\"19:00\\\",\\\"31.12.2017\\\":\\\"18:00\\\",\\\"2.1.2018-7.1.2018\\\":\\\"19:00\\\",\\\"7.1.2018\\\":\\\"14:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-myuzikla/princessa-cirka/\",\"name\":\"Мюзикл «Принцесса цирка»\",\"calendar\":\"\\\"9.12.2017\\\":\\\"19:00,19:00\\\",\\\"10.12.2017\\\":\\\"14:00,14:00\\\",\\\"12.12.2017-14.12.2017\\\":\\\"19:00\\\",\\\"12.12.2017-13.12.2017\\\":\\\"19:00\\\",\\\"16.12.2017-17.12.2017\\\":\\\"19:00\\\",\\\"16.12.2017\\\":\\\"19:00\\\",\\\"19.12.2017-24.12.2017\\\":\\\"19:00\\\",\\\"23.12.2017-24.12.2017\\\":\\\"19:00\\\",\\\"26.12.2017-30.12.2017\\\":\\\"19:00\\\",\\\"28.12.2017-30.12.2017\\\":\\\"19:00\\\",\\\"31.12.2017\\\":\\\"18:00,18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/fanfan-tyulpan/\",\"name\":\"Спектакль «Фанфан-Тюльпан»\",\"calendar\":\"\\\"10.12.2017\\\":\\\"19:00\\\",\\\"5.1.2018\\\":\\\"13:00,19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-myuzikla/prestuplenie-i-nakazanie/\",\"name\":\"Рок-опера «Преступление и наказание»\",\"calendar\":\"\\\"15.11.2017-18.11.2017\\\":\\\"19:00,19:00\\\",\\\"19.11.2017\\\":\\\"14:00,14:00\\\",\\\"21.11.2017-25.11.2017\\\":\\\"19:00\\\",\\\"24.11.2017-25.11.2017\\\":\\\"19:00\\\",\\\"26.11.2017\\\":\\\"14:00,14:00\\\",\\\"29.11.2017-2.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/moya-prekrasnaya-ledi/\",\"name\":\"Спектакль «Моя прекрасная леди»\",\"calendar\":\"\\\"1.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/volshebnik-izumrudnogo-goroda/\",\"name\":\"Мюзикл «Волшебник изумрудного города»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"12:00,16:00\\\",\\\"3.12.2017\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/gribnoy-perepolokh/\",\"name\":\"Мюзикл «Грибной переполох»\",\"calendar\":\"\\\"11.11.2017-12.11.2017\\\":\\\"12:00\\\",\\\"10.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/kulturnyy-centr-moskvich/cirkovoy-myuzikl-alisa/\",\"name\":\"Цирковой мюзикл «Алиса»\",\"calendar\":\"\\\"23.12.2017\\\":\\\"12:00\\\",\\\"23.12.2017-24.12.2017\\\":\\\"15:00,18:00\\\",\\\"24.12.2017\\\":\\\"12:00\\\",\\\"29.12.2017-2.1.2018\\\":\\\"12:00\\\",\\\"29.12.2017-1.1.2018\\\":\\\"15:00,18:00\\\",\\\"3.1.2018-4.1.2018\\\":\\\"11:00,14:00\\\",\\\"5.1.2018-8.1.2018\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatrium-na-serpukhovke-p-r-terezy-durovoy/letychii-korabl/\",\"name\":\"Мюзикл «Летучий корабль»\",\"calendar\":\"\\\"20.1.2018\\\":\\\"11:00,14:00,17:00\\\",\\\"21.1.2018\\\":\\\"12:00,15:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/rok-opera-yunona-i-avos-teatr-alekseya-rybnikova/\",\"name\":\"Рок-опера «Юнона и Авось»\",\"calendar\":\"\\\"29.11.2017\\\":\\\"19:00\\\",\\\"26.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/myuzikl-dzheyn-eyr/\",\"name\":\"Мюзикл «Джейн Эйр»\",\"calendar\":\"\\\"8.1.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/volshebnaya-lampa-aladdina/\",\"name\":\"Мюзикл «Волшебная лампа Аладдина»\",\"calendar\":\"\\\"2.1.2018-8.1.2018\\\":\\\"11:00,15:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/ostrov-sokrovisch/\",\"name\":\"Мюзикл «Остров сокровищ»\",\"calendar\":\"\\\"11.11.2017\\\":\\\"12:00,16:00\\\",\\\"4.1.2018\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/moskovskiy-oblastnoy-teatr-yunogo-zritelya-mogtyuz/ledi-sovershenstvo-s-grishaevoy/\",\"name\":\"Мюзикл «Леди Совершенство» с Н. Гришаевой\",\"calendar\":\"\\\"12.11.2017\\\":\\\"16:00\\\",\\\"25.11.2017\\\":\\\"16:00\\\",\\\"2.12.2017\\\":\\\"16:00\\\",\\\"27.1.2018\\\":\\\"16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/muzykalnyy-teatr-ayvengo-v-izmaylovo/ballada-o-malenkom-serdce/\",\"name\":\"Спектакль «Баллада о маленьком сердце»\",\"calendar\":\"\\\"12.11.2017\\\":\\\"18:00\\\",\\\"25.11.2017\\\":\\\"18:00\\\",\\\"26.11.2017\\\":\\\"17:00\\\",\\\"2.12.2017\\\":\\\"18:00\\\",\\\"9.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/moskovskiy-oblastnoy-teatr-yunogo-zritelya-mogtyuz/ledi-sovershenstvo-s-bystrovoy/\",\"name\":\"Мюзикл «Леди Совершенство» с Н. Быстровой\",\"calendar\":\"\\\"12.11.2017\\\":\\\"12:00\\\",\\\"25.11.2017\\\":\\\"12:00\\\",\\\"2.12.2017\\\":\\\"12:00\\\",\\\"7.1.2018\\\":\\\"12:00\\\",\\\"27.1.2018\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/kino-kholl-vgik/poymay-menya-esli-smozhesh/\",\"name\":\"Мюзикл «Поймай меня, если сможешь»\",\"calendar\":\"\\\"24.11.2017-25.11.2017\\\":\\\"19:00\\\",\\\"1.12.2017-2.12.2017\\\":\\\"19:00\\\",\\\"15.12.2017-16.12.2017\\\":\\\"19:00\\\",\\\"17.12.2017\\\":\\\"18:00\\\",\\\"2.1.2018-4.1.2018\\\":\\\"20:00\\\",\\\"7.1.2018\\\":\\\"19:00\\\",\\\"8.1.2018\\\":\\\"15:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/iisus-khristos-superzvezda/\",\"name\":\"Рок-опера «Иисус Христос – суперзвезда»\",\"calendar\":\"\\\"14.11.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-operetty/cezar-i-kleopatra/\",\"name\":\"Спектакль «Цезарь и Клеопатра»\",\"calendar\":\"\\\"12.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/myuzik-kholl/shkola-lesnoi-magii/\",\"name\":\"Мюзикл «Школа лесной магии»\",\"calendar\":\"\\\"12.11.2017\\\":\\\"12:00\\\",\\\"25.11.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/spectakl-volshebnik-izumrudnogo-goroda/\",\"name\":\"Мюзикл «Волшебник Изумрудного города»\",\"calendar\":\"\\\"7.1.2018\\\":\\\"11:00,14:30,18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-im-vl-mayakovskogo/mama-kot/\",\"name\":\"Детский спектакль «Мама-Кот»\",\"calendar\":\"\\\"6.11.2017\\\":\\\"12:00\\\",\\\"23.12.2017\\\":\\\"12:00\\\",\\\"30.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/peppi-dlinnyychulok/\",\"name\":\"Спектакль «Пеппи Длинныйчулок»\",\"calendar\":\"\\\"26.11.2017\\\":\\\"13:00,13:00,17:00,17:00\\\",\\\"2.12.2017-3.12.2017\\\":\\\"12:00\\\",\\\"2.12.2017\\\":\\\"12:00\\\",\\\"27.1.2018\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/dk-zareche/chelovek-amfibiya/\",\"name\":\"Мюзикл «Человек-амфибия»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-im-ni-sac/oliver-tvist/\",\"name\":\"Мюзикл «Оливер Твист»\",\"calendar\":\"\\\"11.11.2017-12.11.2017\\\":\\\"12:00\\\",\\\"11.11.2017\\\":\\\"16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-estrady/shkodnyy-myuzikl/\",\"name\":\"Мюзикл «Шкодный мюзикл»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-teatr-estrady/master-i-margarita-myuzikl/\",\"name\":\"Спектакль «Мастер и Маргарита»\",\"calendar\":\"\\\"26.11.2017\\\":\\\"19:00\\\",\\\"23.12.2017\\\":\\\"19:00\\\",\\\"7.1.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/sadko-i-carevna-morskaya/\",\"name\":\"Мюзикл «Садко и Царевна Морская»\",\"calendar\":\"\\\"3.12.2017\\\":\\\"12:00\\\",\\\"16.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/kapitanskaya-dochka/\",\"name\":\"Мюзикл «Капитанская дочка»\",\"calendar\":\"\\\"5.11.2017\\\":\\\"18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/priklucheniya-olivera-tvista/\",\"name\":\"Мюзикл «Приключения Оливера Твиста»\",\"calendar\":\"\\\"6.11.2017\\\":\\\"12:00,12:00\\\",\\\"20.1.2018-21.1.2018\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/snezhnaya-koroleva/\",\"name\":\"Детский спектакль «Снежная королева»\",\"calendar\":\"\\\"10.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/rok-opera-yunona-i-avos-teatr-alekseya-rybnikov/\",\"name\":\"Рок-опера «Юнона и Авось» Театр Алексея Рыбников\",\"calendar\":\"\\\"21.1.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/dvorec-kultury-rublevo/kak-zhit-zamuzhem/\",\"name\":\"Спектакль «Как жить замужем»\",\"calendar\":\"\\\"12.11.2017\\\":\\\"18:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-luny/meri-poppins-next/\",\"name\":\"Спектакль «Мэри Поппинс Next»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"18:00\\\",\\\"19.11.2017\\\":\\\"12:00,16:00\\\",\\\"16.12.2017\\\":\\\"18:00\\\",\\\"17.12.2017\\\":\\\"14:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/novogodniy-myuzikl-volk-i-semero-kozlyat-na-novyy-lad/\",\"name\":\"Новогодний мюзикл «Волк и семеро козлят на новый лад»\",\"calendar\":\"\\\"2.1.2018-6.1.2018\\\":\\\"11:00,17:00\\\",\\\"2.1.2018-4.1.2018\\\":\\\"14:00\\\",\\\"6.1.2018\\\":\\\"14:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/myuzik-kholl/priklyucheniya-toma-soyera/\",\"name\":\"Спектакль «Приключения Тома Сойера»\",\"calendar\":\"\\\"18.11.2017\\\":\\\"12:00,12:00\\\",\\\"17.12.2017\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/centralnyy-dom-kultury-zheleznodorozhnikov/bremenskie-muzykanty/\",\"name\":\"Мюзикл «Бременские музыканты»\",\"calendar\":\"\\\"25.11.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-romen/zolushka/\",\"name\":\"Мюзикл «Золушка»\",\"calendar\":\"\\\"9.12.2017\\\":\\\"17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/gambrinus/\",\"name\":\"Спектакль «Гамбринус»\",\"calendar\":\"\\\"30.11.2017\\\":\\\"19:00\\\",\\\"19.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/nedorosl/\",\"name\":\"Мюзикл «Недоросль»\",\"calendar\":\"\\\"24.11.2017\\\":\\\"19:00\\\",\\\"8.12.2017\\\":\\\"19:00\\\",\\\"15.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-romen/pirat-i-prizraki/\",\"name\":\"Детский спектакль «Пират и призраки»\",\"calendar\":\"\\\"12.11.2017\\\":\\\"17:00\\\",\\\"9.12.2017\\\":\\\"12:00\\\",\\\"10.12.2017\\\":\\\"17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/centr-dramaturgii-i-rezhissury/bratec-krolik-bratec-lis/\",\"name\":\"Мюзикл «Братец Кролик, Братец Лис»\",\"calendar\":\"\\\"26.11.2017\\\":\\\"11:00\\\",\\\"30.12.2017\\\":\\\"11:00\\\",\\\"2.1.2018-3.1.2018\\\":\\\"11:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/kak-possorilsya-ii-s-in/\",\"name\":\"Спектакль «Как поссорился И.И. с И.Н.»\",\"calendar\":\"\\\"22.11.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/lukomore/\",\"name\":\"Мюзикл «Лукоморье»\",\"calendar\":\"\\\"3.12.2017\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-muzykalno-dramatichskiy-teatr-a-ya/kak-obezyana-morskogo-carya-perekhitrila/\",\"name\":\"Мюзикл «Как обезьяна морского царя перехитрила»\",\"calendar\":\"\\\"16.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/dk-im-zueva/bremenskie-muzykanty-vozvraschenie-legendy/\",\"name\":\"Мюзикл «Бременские музыканты – возвращение легенды!»\",\"calendar\":\"\\\"26.11.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/novyy-dramaticheskiy-teatr/morozko/\",\"name\":\"Мюзикл «Морозко»\",\"calendar\":\"\\\"23.12.2017\\\":\\\"11:00\\\",\\\"23.12.2017-30.12.2017\\\":\\\"14:00\\\",\\\"23.12.2017-29.12.2017\\\":\\\"17:00\\\",\\\"25.12.2017-26.12.2017\\\":\\\"11:00\\\",\\\"28.12.2017-30.12.2017\\\":\\\"11:00\\\",\\\"2.1.2018-8.1.2018\\\":\\\"11:00,14:00\\\",\\\"2.1.2018-4.1.2018\\\":\\\"17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-yunogo-aktera/moskovskaya-istoriya-1205/\",\"name\":\"Мюзикл «Московская история 1205»\",\"calendar\":\"\\\"9.12.2017-10.12.2017\\\":\\\"12:00,16:00\\\",\\\"3.2.2018-4.2.2018\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/kino-kholl-vgik/schelkunchik-i-myshinyy-korol/\",\"name\":\"Мюзикл «Щелкунчик и мышиный король»\",\"calendar\":\"\\\"30.12.2017\\\":\\\"12:00,15:00\\\",\\\"31.12.2017\\\":\\\"12:00,15:00\\\",\\\"3.1.2018-6.1.2018\\\":\\\"12:00,15:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/sindbad-morekhod/\",\"name\":\"Спектакль «Синдбад-мореход»\",\"calendar\":\"\\\"20.1.2018\\\":\\\"13:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/filial-teatra-pushkina/rozhdestvo-ogenri/\",\"name\":\"Мюзикл «Рождество О.Генри»\",\"calendar\":\"\\\"6.1.2018\\\":\\\"14:00\\\",\\\"6.1.2018-7.1.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-myuzikla/chudesa-i-kuralesy/\",\"name\":\"Спектакль «Чудеса и куралесы»\",\"calendar\":\"\\\"23.12.2017-24.12.2017\\\":\\\"14:00\\\",\\\"24.12.2017\\\":\\\"14:00\\\",\\\"30.12.2017\\\":\\\"14:00\\\",\\\"31.12.2017\\\":\\\"13:00,13:00\\\",\\\"3.1.2018-8.1.2018\\\":\\\"14:00\\\",\\\"7.1.2018\\\":\\\"14:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-snezhnaya-koroleva-kamernyy-muzykalnyy-teatr-el-art/\",\"name\":\"Мюзикл «Снежная королева». Камерный музыкальный театр «Эль Арт»\",\"calendar\":\"\\\"24.12.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/doma-kultury/kulturnyy-centr-zil/3d-mapping-shou-chernomor/\",\"name\":\"3D mapping шоу «Черномор»\",\"calendar\":\"\\\"2.1.2018-3.1.2018\\\":\\\"12:00,16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/todd-5-let-den-rozhdeniya-rok-myuzikla/\",\"name\":\"Зонг-опера «TODD». 5 лет! День рождения рок-мюзикла!\",\"calendar\":\"\\\"9.11.2017-10.11.2017\\\":\\\"20:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/detskiy-muzykalnyy-teatr-ekspromt/ali-baba-i-40-razboynikov/\",\"name\":\"Спектакль «Али-баба и 40 разбойников»\",\"calendar\":\"\\\"26.11.2017\\\":\\\"12:00,15:00\\\",\\\"10.12.2017\\\":\\\"12:00,15:00\\\",\\\"28.1.2018\\\":\\\"12:00,15:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-novogodnie-priklyucheniya-malenkikh-volshebnikov/\",\"name\":\"Мюзикл «Новогодние приключения маленьких волшебников»\",\"calendar\":\"\\\"22.12.2017\\\":\\\"14:00,19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-kino/3d-myuzikl-alisa-v-strane-chudes/\",\"name\":\"3D мюзикл «Алиса в стране чудес»\",\"calendar\":\"\\\"25.11.2017\\\":\\\"12:00\\\"\"},{\"url\":\"https://www.ticketland.ru/sportivnye-kompleksy/ok-luzhniki/ledovyy-myuzikl-drakula-istoriya-vechnoy-lyubvi/\",\"name\":\"Ледовый мюзикл «Дракула. История вечной любви»\",\"calendar\":\"\\\"3.12.2017\\\":\\\"16:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/iisus-khristos-superzvezda/\",\"name\":\"Рок-опера «Иисус Христос – суперзвезда»\",\"calendar\":\"\\\"25.3.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-p-r-gennadiya-chikhacheva/moy-samyy-luchshiy-papa/\",\"name\":\"Спектакль «Мой самый лучший папа»\",\"calendar\":\"\\\"19.11.2017\\\":\\\"17:00\\\"\"},{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/dom-muzyki/myuzikl-kapitanskaya-dochka/\",\"name\":\"Мюзикл «Капитанская дочка»\",\"calendar\":\"\\\"18.2.2018\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-u-nikitskikh-vorot/bednaya-liza/\",\"name\":\"Мюзикл «Бедная Лиза»\",\"calendar\":\"\\\"29.11.2017\\\":\\\"19:00\\\",\\\"17.12.2017\\\":\\\"19:00\\\"\"},{\"url\":\"https://www.ticketland.ru/teatry/teatr-zolotoe-kolco/yunona-i-avos/\",\"name\":\"Рок-опера «Юнона и Авось»\",\"calendar\":\"\\\"9.12.2017\\\":\\\"19:00\\\"\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./php/data.json\n// module id = 2\n// module chunks = 0","import Background from \"./Background\";\n\nexport default class AfishaBackground extends Background{\n  constructor(options={}){\n    super(options);\n    this.baseUrl='https://www.ticketland.ru';\n    this.startUrl=this.baseUrl+'/musical/';\n  }\n  extFetch(url,options={},output,errorMes=\"There is extFetch error\"){\n    if(this.options.verbose){\n      console.log(\"extFetch: \",url);\n    };\n    return fetch(url,options)\n    .then(response=>{\n      if(response.ok){\n        switch(output.toLowerCase()){\n          case 'dom':\n            return response.text()\n            .then(text=>{\n              let parser=new DOMParser();\n              return parser.parseFromString(text,\"text/html\");\n            });\n          break;\n          default:\n            return response[output]();\n        }\n      } else {\n        throw new Error(errorMes);\n      }\n    })\n    .catch(err=>{\n      console.log(\"extFetch error: \",err);\n      throw err;\n    })\n  }\n  pause(delay,ret='',message=`Pause :${delay}`){\n    if(this.options.verbose){\n      console.log(message);\n    };\n    return new Promise((resolve,reject)=>{\n      setTimeout(()=>{\n          resolve(ret);\n      },delay);\n    })\n  }\n  // onBrowserActionSingle(tab){\n  //   let str=`{\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/\",\"name\":\"Мюзикл «Привидение»\",\"shows\":[{\"date\":\"2017-11-04T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171104_180001-1937922\",\"price\":\"2 400 — 4 080 руб.\"},{\"date\":\"2017-11-05T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171105_130001-1937922\",\"price\":\"2 400 — 4 080 руб.\"},{\"date\":\"2017-11-05T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171105_180001-1937922\",\"price\":\"2 400 — 6 600 руб.\"},{\"date\":\"2017-11-06T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171106_130001-1937922\",\"price\":\"1 700 — 3 800 руб.\"},{\"date\":\"2017-11-06T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171106_180001-1937922\",\"price\":\"1 700 — 3 800 руб.\"},{\"date\":\"2017-11-08T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171108_190001-1937922\",\"price\":\"2 400 — 4 080 руб.\"},{\"date\":\"2017-11-11T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171111_130001-1937922\",\"price\":\"1 700 — 3 800 руб.\"},{\"date\":\"2017-11-11T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171111_180001-1937922\",\"price\":\"2 000 — 5 500 руб.\"},{\"date\":\"2017-11-12T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171112_130001-1937922\",\"price\":\"1 700 — 3 800 руб.\"},{\"date\":\"2017-11-12T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171112_180001-1937922\",\"price\":\"1 700 — 5 000 руб.\"},{\"date\":\"2017-11-14T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171114_190001-1937922\",\"price\":\"1 400 — 4 500 руб.\"},{\"date\":\"2017-11-15T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171115_190001-1937922\",\"price\":\"1 400 — 4 500 руб.\"},{\"date\":\"2017-11-16T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171116_190001-1937922\",\"price\":\"1 400 — 4 500 руб.\"},{\"date\":\"2017-11-17T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171117_190001-1937922\",\"price\":\"1 700 — 5 000 руб.\"},{\"date\":\"2017-11-18T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171118_130001-1937922\",\"price\":\"2 400 — 6 600 руб.\"},{\"date\":\"2017-11-18T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171118_180001-1937922\",\"price\":\"2 000 — 4 100 руб.\"},{\"date\":\"2017-11-19T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171119_130001-1937922\",\"price\":\"1 700 — 5 000 руб.\"},{\"date\":\"2017-11-19T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171119_180001-1937922\",\"price\":\"1 700 — 3 800 руб.\"},{\"date\":\"2017-11-21T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171121_190001-1937922\",\"price\":\"1 400 — 3 500 руб.\"},{\"date\":\"2017-11-22T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171122_190001-1937922\",\"price\":\"1 400 — 4 500 руб.\"},{\"date\":\"2017-11-23T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171123_190001-1937922\",\"price\":\"1 400 — 4 500 руб.\"},{\"date\":\"2017-11-25T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171125_130001-1937922\",\"price\":\"1 700 — 5 000 руб.\"},{\"date\":\"2017-11-25T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171125_180001-1937922\",\"price\":\"2 000 — 5 500 руб.\"},{\"date\":\"2017-11-26T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171126_130001-1937922\",\"price\":\"1 700 — 5 000 руб.\"},{\"date\":\"2017-11-26T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171126_180001-1937922\",\"price\":\"1 700 — 5 000 руб.\"},{\"date\":\"2017-11-29T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171129_190001-1937922\",\"price\":\"1 400 — 4 500 руб.\"},{\"date\":\"2017-11-30T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171130_190001-1937922\",\"price\":\"2 400 — 6 600 руб.\"},{\"date\":\"2017-12-02T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171202_130001-1937922\",\"price\":\"1 700 — 5 000 руб.\"},{\"date\":\"2017-12-02T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171202_180001-1937922\",\"price\":\"2 000 — 5 500 руб.\"},{\"date\":\"2017-12-03T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171203_130001-1937922\",\"price\":\"1 700 — 5 000 руб.\"},{\"date\":\"2017-12-03T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171203_180001-1937922\",\"price\":\"1 700 — 5 000 руб.\"},{\"date\":\"2017-12-05T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171205_190001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-06T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171206_190001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-08T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171208_190001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-09T11:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171209_140001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-09T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171209_190001-1937922\",\"price\":\"2 400 — 6 600 руб.\"},{\"date\":\"2017-12-10T11:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171210_140001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-10T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171210_190001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-11T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171211_190001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-13T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171213_190001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-14T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171214_190001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-17T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171217_130001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-17T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171217_180001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-19T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171219_190001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-23T11:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171223_140001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-23T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171223_190001-1937922\",\"price\":\"2 400 — 4 920 руб.\"},{\"date\":\"2017-12-29T16:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171229_190001-1937922\",\"price\":\"2 200 — 6 050 руб.\"},{\"date\":\"2017-12-30T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171230_130001-1937922\",\"price\":\"2 400 — 6 600 руб.\"},{\"date\":\"2017-12-30T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171230_180001-1937922\",\"price\":\"2 400 — 6 600 руб.\"},{\"date\":\"2017-12-31T10:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171231_130001-1937922\",\"price\":\"2 400 — 6 600 руб.\"},{\"date\":\"2017-12-31T15:00:01.000Z\",\"url\":\"https://www.ticketland.ru/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/20171231_180001-1937922\",\"price\":\"2 400 — 6 600 руб.\"}]}`;\n  //\n  //   let data=JSON.parse(str);\n  //   data.shows=data.shows.map(item=>Object.assign(item,{date:new Date(Date.parse(item.date))}));\n  //   data.calendar=this.compileCalendar(data.shows);\n  //   console.log(data);\n  // }\n  // onBrowserActionDate(tab){\n  //   let str='2017-12-31T18:00:01+03:00';\n  //   let d=new Date(Date.parse(str));\n  //   console.log(d,d.getHours());\n  // }\n//   onBrowserActionMusical(tab){\n// //NOTE:test\n//\n//     this.musicals={};\n//     this.parseMusical(this.baseUrl+'/koncertnye-zaly/moskovskiy-dvorec-molodezhi/prividenie/')\n//     .then(()=>{\n//       console.log(\"DONE!\");\n//       console.log(JSON.stringify(this.musicals));\n//       this.inProgress=false;\n//     })\n//   }\n  onBrowserActionGen(tab){\n    let buf=[];\n    this.options.locData.forEach(item=>{\n      if(this.options.urls[item.url]){\n        buf.push(`\"${item.url}\":${this.options.urls[item.url]}`);\n      } else {\n        buf.push(`\"${item.url}\":\"\"`);\n      };\n    });\n    console.log(buf.join(\",\\n\"));\n  }\n  onBrowserAction(tab){\n    let query=Promise.resolve();\n    this.options.locData.forEach(item=>{\n      query=query\n      .then(()=>{\n        if(this.options.urls[item.url]){\n          let fd=new FormData();\n          fd.append('uid',this.options.urls[item.url]);\n          fd.append('agenda',item.calendar);\n          return this.extFetch('http://musicals.ru/afisha.php',{method:'POST',body:fd},\"text\",\"Can't store afisha\")\n          .then(text=>{\n            console.log(\"Stored: \",item.name);\n          })\n          .then(()=>this.pause(1000));\n        } else {\n          console.log(\"Can't post:\",item.name);\n          console.log(item.url);\n        }\n      })\n    });\n  }\n  onBrowserActionReal(tab){\n//NOTE: load first page\n    if(!this.inProgress){\n      this.musicals={};\n      this.inProgress=true;\n      this.extFetch(this.startUrl,{},\"dom\")\n      .then(dom=>{\n//NOTE:parse pages\n          let queue=Promise.resolve();\n          let list=dom.querySelectorAll(\".paginator a[data-page]\");\n          for(let cnt=0,m=list.length;cnt<m;cnt++){\n            if(cnt==0){\n              queue=queue\n              .then(()=>this.parsePage('',dom));\n            } else {\n              //continue;\n              queue=queue\n              .then(()=>this.pause(1000))\n              .then(()=>this.parsePage(this.baseUrl+list[cnt].attributes['href'].value,null));\n            }\n          };\n          queue=queue.then(()=>{\n            if(this.options.verbose){\n              console.log(\"Done!\");\n              let fd=new FormData();\n              let dataToSend=[];\n              for(let o in this.musicals){\n                let item=this.musicals[o];\n                dataToSend.push({\n                  url:item.url,\n                  name:item.name,\n                  calendar:item.calendar\n                });\n              }\n              fd.append('data',JSON.stringify(dataToSend));\n              return fetch(\"http://localhost/afishaReader/php/store.php\",{\n                method:'POST',\n                body:fd\n              });\n            };\n            //console.log(JSON.stringify(this.musicals));\n            this.inProgress=false;\n          })\n          return queue;\n      })\n      .catch(err=>{\n        console.log(err);\n      })\n    } else {\n      console.log(\"Plugin is busy!\");\n    }\n  }\n\n  parsePage(url,dom){\n    if(!dom){\n      if(this.options.verbose){\n        console.log(\"let's fetch url first\",url);\n      };\n      return this.extFetch(url,{},'dom')\n      .then(dom=>this.parsePage(url,dom));\n    } else {\n      if(this.options.verbose){\n        console.log(\"there is a dom, let's parse it!\");\n      };\n      let list=dom.querySelectorAll('.show_room_search .search_item .showinf .showname a');\n      let queue=Promise.resolve();\n      for(let cnt=0,m=list.length;cnt<m;cnt++){\n        if(cnt!=0){\n          queue=queue.then(()=>this.pause(1000));\n        };\n        queue=queue.then(()=>this.parseMusical(this.baseUrl+list[cnt].attributes['href'].value));\n      };\n      return queue;\n    }\n  }\n  parseMusical(url){\n    if(this.options.verbose){\n      console.log(\"Let's parse musical\",url);\n    };\n    let musical={\n      url:url\n    }\n    return this.extFetch(url,{},'dom')\n    .then(dom=>{\n      musical.name=dom.querySelector('.showtitle .name').innerHTML;\n      musical.shows=[];\n      let shows=dom.querySelectorAll('.show_box .show_list .show_item');\n      for(let cnt=0,m=shows.length;cnt<m;cnt++){\n        let d=shows[cnt].querySelector('.day_number_title[itemprop=\"startDate\"]');\n        let u=shows[cnt].querySelector('.buy_button [itemprop=url]');\n        let p=shows[cnt].querySelector('.price [itemprop=price]');\n        musical.shows.push({\n          date:d?new Date(Date.parse(d.attributes['content'].value)):'',\n          url:u?this.baseUrl+u.attributes['href'].value:'',\n          price:p?p.innerHTML:''\n        });\n      }\n      musical.calendar=this.compileCalendar(musical.shows);\n      if(this.options.verbose){\n        console.log(musical);\n      }\n      this.musicals[url]=musical;\n    })\n  }\n//NOTE: calendar compilation\n  compileCalendar(shows){\n    let rules=[];\n    shows.forEach(item=>{\n      let ms=item.date.getTime();\n      let itemRules=rules.filter(rule=>{\n          return this.checkAfishaRule(rule.endDate.getTime(),ms);\n      })\n      if(itemRules.length){\n        itemRules[0].endDate=item.date;\n      } else {\n        rules.push(Object.assign({startDate:item.date,endDate:item.date,time:this.formTime(item.date)},item));\n      }\n    });\n\n    let rules2={};\n    rules.forEach(rule=>{\n      let dates=(rule.startDate.getTime()!=rule.endDate.getTime())?\n        this.formDate(rule.startDate)+'-'+this.formDate(rule.endDate):\n        this.formDate(rule.startDate);\n\n      if(rules2[dates]){\n        rules2[dates].time+=','+rule.time;\n      } else {\n        rules2[dates]=Object.assign({},rule,{dates:dates});\n      }\n    });\n    rules=[];\n    for(let o in rules2){\n      rules.push(rules2[o]);\n    };\n\n    return rules.map(rule=>{\n      return `\"${rule.dates}\":\"${rule.time}\"`;\n    }).join(',');\n  }\n  checkAfishaRule(date1,date2){\n    let checkDate=new Date(date1);\n    checkDate.setDate(checkDate.getDate()+1);\n    return checkDate.getTime()==date2;\n  }\n  formTime(date){\n    let m=date.getMinutes();\n    let ret=date.getHours()+':';\n    if(m<10){\n      ret+='0';\n    };\n    ret+=m;\n    return ret;\n  }\n  formDate(date){\n    return date.getDate()+'.'+(date.getMonth()+1)+'.'+date.getFullYear();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/classes/AfishaBackground.js","export default class Background {\n  constructor(options={}){\n    const defOptions={\n        receivePluginMessages:true,\n        browserAction:false,\n        verbose:false,\n        receiveNotesClick:false\n    };\n    this.states={};\n    this.options=Object.assign({},defOptions,options);\n    if(this.options.verbose){\n      console.log(\"Started background\");\n    };\n    if(this.options.browserAction){\n      browser.browserAction.onClicked.addListener((tab)=>this.onBrowserAction.bind(this,tab)(tab));\n    };\n    if(this.options.receivePluginMessages){\n      browser.runtime.onMessage.addListener((request, sender, sendResponse) => this.onPluginMessage.bind(this,request,sender,sendResponse)(request, sender, sendResponse))\n    };\n    if(this.options.receiveNotesClick){\n      browser.notifications.onClicked.addListener(noteId => this.onNoteClick.bind(this,noteId)(noteId));\n    };\n  }\n  onBrowserAction(tab){\n    //NOTE: click on bar button, tab - is an active tab data\n  }\n  onPluginMessage(request,sender,sendResponse){\n    //NOTE: receive a message from plugin script\n  }\n  onNoteClick(noteId){\n    //NOTE: click on a note\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Background.js","export default {\n  MODE_STARTING:\"mode_starting\",\n  MODE_WAIT:\"mode_wait\"\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js"],"sourceRoot":""}